{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"","title":"Home"},{"location":"LABS/","text":"Seja bem vindo.","title":"Home"},{"location":"LABS/MISP/","text":"MISP - Home \u00b6 Config VPS Server Install Docker Install MISP Docker Extra: Criando dominio Config Nginx DNS Aumentando a seguran\u00e7a MISP Configura\u00e7\u00f5es iniciais do MISP Criando organiza\u00e7\u00e3o no MISP Adicionando usuario MISP Adicionando usuario sync Resetando a senha admin via linha de comando","title":"Antes de come\u00e7ar"},{"location":"LABS/MISP/#misp-home","text":"Config VPS Server Install Docker Install MISP Docker Extra: Criando dominio Config Nginx DNS Aumentando a seguran\u00e7a MISP Configura\u00e7\u00f5es iniciais do MISP Criando organiza\u00e7\u00e3o no MISP Adicionando usuario MISP Adicionando usuario sync Resetando a senha admin via linha de comando","title":"MISP - Home"},{"location":"LABS/MISP/install-guide/","text":"Instala\u00e7\u00e3o - Home \u00b6 Config VPS Server Install Docker Install MISP Docker Extra: Criando dominio Config Nginx DNS Aumentando a seguran\u00e7a MISP Configura\u00e7\u00f5es iniciais do MISP Criando organiza\u00e7\u00e3o no MISP Adicionando usuario MISP Adicionando usuario sync Resetando a senha admin via linha de comando","title":"Instala\u00e7\u00e3o - Home"},{"location":"LABS/MISP/install-guide/#instalacao-home","text":"Config VPS Server Install Docker Install MISP Docker Extra: Criando dominio Config Nginx DNS Aumentando a seguran\u00e7a MISP Configura\u00e7\u00f5es iniciais do MISP Criando organiza\u00e7\u00e3o no MISP Adicionando usuario MISP Adicionando usuario sync Resetando a senha admin via linha de comando","title":"Instala\u00e7\u00e3o - Home"},{"location":"LABS/MISP/install-guide/add-user-misp/","text":"Adicionando usu\u00e1rio ao MISP. \u00b6 Voc\u00ea precisa estar logado como administrador para criar novos usu\u00e1rios. Por padr\u00e3o ele vem todo vazio para adicionar as informa\u00e7\u00f5es. Vamos precisar das seguintes informa\u00e7\u00f5es para criar o usu\u00e1rio na organiza\u00e7\u00e3o. Email Podemos definir uma senha. Selecionar a organiza\u00e7\u00e3o Fun\u00e7\u00e3o AuthKey NIDS SID Sync user PGP Key Podemos selecionar alguns pontos para o usu\u00e1rio: Receber alerta com os eventos publicados Receber alertas de Contact reporter Desativar usu\u00e1rio Enviar credenciais automaticamente Depois que criamos o usu\u00e1rio vamos ser redirecionado para a p\u00e1gina das organiza\u00e7\u00f5es. Validando acesso. \u00b6 Vamos agora logar com o usu\u00e1rio que criamos. Em seguida vai ser necess\u00e1rio criar outra credencial. Podemos ver que deu tudo certo na cria\u00e7\u00e3o de nosso usu\u00e1rio que ir\u00e1 administrar a organiza\u00e7\u00e3o.","title":"9. Adicionando usuario MISP"},{"location":"LABS/MISP/install-guide/add-user-misp/#adicionando-usuario-ao-misp","text":"Voc\u00ea precisa estar logado como administrador para criar novos usu\u00e1rios. Por padr\u00e3o ele vem todo vazio para adicionar as informa\u00e7\u00f5es. Vamos precisar das seguintes informa\u00e7\u00f5es para criar o usu\u00e1rio na organiza\u00e7\u00e3o. Email Podemos definir uma senha. Selecionar a organiza\u00e7\u00e3o Fun\u00e7\u00e3o AuthKey NIDS SID Sync user PGP Key Podemos selecionar alguns pontos para o usu\u00e1rio: Receber alerta com os eventos publicados Receber alertas de Contact reporter Desativar usu\u00e1rio Enviar credenciais automaticamente Depois que criamos o usu\u00e1rio vamos ser redirecionado para a p\u00e1gina das organiza\u00e7\u00f5es.","title":"Adicionando usu\u00e1rio ao MISP."},{"location":"LABS/MISP/install-guide/add-user-misp/#validando-acesso","text":"Vamos agora logar com o usu\u00e1rio que criamos. Em seguida vai ser necess\u00e1rio criar outra credencial. Podemos ver que deu tudo certo na cria\u00e7\u00e3o de nosso usu\u00e1rio que ir\u00e1 administrar a organiza\u00e7\u00e3o.","title":"Validando acesso."},{"location":"LABS/MISP/install-guide/add-user-sync-misp/","text":"Adicionando usu\u00e1rio SYNC ao MISP. \u00b6 Voc\u00ea precisa estar logado como administrador para criar novos usu\u00e1rios sync. Criando usu\u00e1rio sync \u00b6 Vamos precisar das seguintes informa\u00e7\u00f5es para criar um usu\u00e1rio sync na nova organiza\u00e7\u00e3o. email(Por exemplo: sync@osintvillage.org ) Podemos definir uma senha.(N\u00e3o precisamos definir uma senha, mas \u00e9 recomendado). Selecionar a organiza\u00e7\u00e3o(Nome da organiza\u00e7\u00e3o que deseja usar). Fun\u00e7\u00e3o(Aqui vamos selecionar Sync user ). AuthKey NIDS SID Sync user PGP Key Podemos selecionar alguns pontos para o usu\u00e1rio: Receber alerta com os eventos publicados Receber alertas de Contact reporter Desativar usu\u00e1rio Enviar credenciais automaticamente Em seguida vamos clicar em Create User . Se der tudo certo vamos ter uma mensagem falando que o usu\u00e1rio foi salvo.","title":"10. Adicionando usuario sync"},{"location":"LABS/MISP/install-guide/add-user-sync-misp/#adicionando-usuario-sync-ao-misp","text":"Voc\u00ea precisa estar logado como administrador para criar novos usu\u00e1rios sync.","title":"Adicionando usu\u00e1rio SYNC ao MISP."},{"location":"LABS/MISP/install-guide/add-user-sync-misp/#criando-usuario-sync","text":"Vamos precisar das seguintes informa\u00e7\u00f5es para criar um usu\u00e1rio sync na nova organiza\u00e7\u00e3o. email(Por exemplo: sync@osintvillage.org ) Podemos definir uma senha.(N\u00e3o precisamos definir uma senha, mas \u00e9 recomendado). Selecionar a organiza\u00e7\u00e3o(Nome da organiza\u00e7\u00e3o que deseja usar). Fun\u00e7\u00e3o(Aqui vamos selecionar Sync user ). AuthKey NIDS SID Sync user PGP Key Podemos selecionar alguns pontos para o usu\u00e1rio: Receber alerta com os eventos publicados Receber alertas de Contact reporter Desativar usu\u00e1rio Enviar credenciais automaticamente Em seguida vamos clicar em Create User . Se der tudo certo vamos ter uma mensagem falando que o usu\u00e1rio foi salvo.","title":"Criando usu\u00e1rio sync"},{"location":"LABS/MISP/install-guide/aumentando-seguranca-servidor/","text":"Aumentando a seguran\u00e7a do servidor \u00b6 Alterando porta acesso servidor \u00b6 Por padr\u00e3o o SSH funciona na porta 22, dessa forma muitas pessoas m\u00e1 intencionadas acabam buscando atacar essas portas e dessa forma vamos alterar a porta que funciona na 22 para a porta 666 . Vamos editar o arquivo /etc/ssh/sshd_config . $ sudo nano /etc/ssh/sshd_config Vamos alterar a porta 22 para a 666 . N\u00e3o esque\u00e7a de salvar. Podemos verificar que n\u00e3o \u00e9 mais poss\u00edvel realizar o acesso na porta 22 . Vamos agora realizar o login usando a porta 666 e validar que deu tudo certo no login. Subindo firewall \u00b6 Podemos ver que ao acessar a porta do docker ele est\u00e1 dispon\u00edvel, isso porque por padr\u00e3o a porta est\u00e1 dispon\u00edvel para todos. Isso acontece porque o docker exp\u00f5e a porta no seguinte formato. Podemos parar o container e fazer uma altera\u00e7\u00e3o simples para s\u00f3 funcionar de forma local. Vou at\u00e9 o diret\u00f3rio do projeto e vou matar o container, por usar o volume n\u00e3o vamos perder os dados. $ cd ~/LABS/ $ docker-compose kill Vamos editar o arquivo docker-compose.yml , vamos alterar o valor: ports: - \"127.0.0.1:8080:80\" - \"127.0.0.1:4433:443\" N\u00e3o esque\u00e7a de salvar e sair. Agora vamos iniciar novamente o docker. $ docker-compose up -d Podemos ver que agora a porta n\u00e3o est\u00e1 mais exposta. Por\u00e9m via dom\u00ednio \u00e9 poss\u00edvel o acesso. Adicionando regras para 80, 443 e 666 \u00b6 Vamos usar o ufw(Uncomplicated Firewall), devido a facilidade do uso vou explicar como podemos usar ele. $ sudo apt install ufw -y Vamos adicionar as seguintes regras. - Permitir acesso via 666(SSH) $ sudo ufw allow 666 Permitir acesso via 80 e 443. $ sudo ufw allow 80 $ sudo ufw allow 443 Podemos agora ligar o firewall. $ sudo ufw enable Criando certificado SSL com certbot \u00b6 Para gerar o certificado vamos usar o Certbot, devido a facilidade de criar e gerenciar. Vamos instalar os requisitos para criar certificado. $ sudo apt install certbot python3-certbot-nginx -y Vamos adicionar o email do dom\u00ednio. Vamos aceitar que seja redirecionado para a 443 e assim for\u00e7ando o acesso ao HTTPS. Vamos escolher a segunda op\u00e7\u00e3o, para redirecionar sempre para HTTPS. Vamos ter um problema, o problema \u00e9 o seguinte. Isso pode acontecer devido ao cache. Vamos usar uma aba an\u00f4nima para validar o acesso ou limpar o cache.","title":"6. Aumentando a seguran\u00e7a MISP"},{"location":"LABS/MISP/install-guide/aumentando-seguranca-servidor/#aumentando-a-seguranca-do-servidor","text":"","title":"Aumentando a seguran\u00e7a do servidor"},{"location":"LABS/MISP/install-guide/aumentando-seguranca-servidor/#alterando-porta-acesso-servidor","text":"Por padr\u00e3o o SSH funciona na porta 22, dessa forma muitas pessoas m\u00e1 intencionadas acabam buscando atacar essas portas e dessa forma vamos alterar a porta que funciona na 22 para a porta 666 . Vamos editar o arquivo /etc/ssh/sshd_config . $ sudo nano /etc/ssh/sshd_config Vamos alterar a porta 22 para a 666 . N\u00e3o esque\u00e7a de salvar. Podemos verificar que n\u00e3o \u00e9 mais poss\u00edvel realizar o acesso na porta 22 . Vamos agora realizar o login usando a porta 666 e validar que deu tudo certo no login.","title":"Alterando porta acesso servidor"},{"location":"LABS/MISP/install-guide/aumentando-seguranca-servidor/#subindo-firewall","text":"Podemos ver que ao acessar a porta do docker ele est\u00e1 dispon\u00edvel, isso porque por padr\u00e3o a porta est\u00e1 dispon\u00edvel para todos. Isso acontece porque o docker exp\u00f5e a porta no seguinte formato. Podemos parar o container e fazer uma altera\u00e7\u00e3o simples para s\u00f3 funcionar de forma local. Vou at\u00e9 o diret\u00f3rio do projeto e vou matar o container, por usar o volume n\u00e3o vamos perder os dados. $ cd ~/LABS/ $ docker-compose kill Vamos editar o arquivo docker-compose.yml , vamos alterar o valor: ports: - \"127.0.0.1:8080:80\" - \"127.0.0.1:4433:443\" N\u00e3o esque\u00e7a de salvar e sair. Agora vamos iniciar novamente o docker. $ docker-compose up -d Podemos ver que agora a porta n\u00e3o est\u00e1 mais exposta. Por\u00e9m via dom\u00ednio \u00e9 poss\u00edvel o acesso.","title":"Subindo firewall"},{"location":"LABS/MISP/install-guide/aumentando-seguranca-servidor/#adicionando-regras-para-80-443-e-666","text":"Vamos usar o ufw(Uncomplicated Firewall), devido a facilidade do uso vou explicar como podemos usar ele. $ sudo apt install ufw -y Vamos adicionar as seguintes regras. - Permitir acesso via 666(SSH) $ sudo ufw allow 666 Permitir acesso via 80 e 443. $ sudo ufw allow 80 $ sudo ufw allow 443 Podemos agora ligar o firewall. $ sudo ufw enable","title":"Adicionando regras para 80, 443 e 666"},{"location":"LABS/MISP/install-guide/aumentando-seguranca-servidor/#criando-certificado-ssl-com-certbot","text":"Para gerar o certificado vamos usar o Certbot, devido a facilidade de criar e gerenciar. Vamos instalar os requisitos para criar certificado. $ sudo apt install certbot python3-certbot-nginx -y Vamos adicionar o email do dom\u00ednio. Vamos aceitar que seja redirecionado para a 443 e assim for\u00e7ando o acesso ao HTTPS. Vamos escolher a segunda op\u00e7\u00e3o, para redirecionar sempre para HTTPS. Vamos ter um problema, o problema \u00e9 o seguinte. Isso pode acontecer devido ao cache. Vamos usar uma aba an\u00f4nima para validar o acesso ou limpar o cache.","title":"Criando certificado SSL com certbot"},{"location":"LABS/MISP/install-guide/config-nginx-dns/","text":"Instalando Nginx \u00b6 Vamos acessar nosso IP e ver se a porta 80 j\u00e1 est\u00e1 sendo usada, em seguida iremos instalar nosso sistema de servidor Nginx. $ sudo apt install nginx -y Criando proxy reverso \u00b6 Vamos come\u00e7ar deletando o arquivo de configura\u00e7\u00e3o default que vem como o nginx . Podemos fazer isso da seguinte forma: $ sudo rm /etc/nginx/sites-available/default $ sudo rm /etc/nginx/sites-enabled/default Dessa forma exclu\u00edmos os arquivos default, depois iremos criar os nossos. Vamos criar o arquivo /etc/nginx/sites-available/misp , com ele vamos criar um proxy reverso redirecionando a porta 8080 para o dom\u00ednio misp.osintvillage.org. server { server_name website.com ; location / { proxy_pass https://localhost:4433 ; } } N\u00e3o esque\u00e7a de salvar. Agora precisamos realizar um link simb\u00f3lico enviando o arquivo /etc/nginx/sites-available/misp para o endere\u00e7o /etc/nginx/sites-enabled/misp . $ sudo ln -s /etc/nginx/sites-available/misp /etc/nginx/sites-enabled/misp Para verificar se est\u00e1 tudo ok com o nosso arquivo de configura\u00e7\u00e3o iremos realizar o comando. $ sudo nginx -t Precisa ter uma imagem semelhante com a abaixo. Redirecionando para dom\u00ednio - CloudFlare. \u00b6 Agora precisamos redirecionar nosso IP para nosso servidor DNS, nesse caso eu uso o CloudFlare para gerenciar meu DNS e assim vou adicionar imagens do processo. Depois de logado no CloudFlare vamos realizar a adi\u00e7\u00e3o do servidor, no meu caso eu vou criar o subdom\u00ednio misp e tem o endere\u00e7o misp.osintvillage.org . N\u00e3o devemos esquecer de salvar. Podemos verificar que nosso MISP est\u00e1 vis\u00edvel no subdom\u00ednio.","title":"5. Config Nginx DNS"},{"location":"LABS/MISP/install-guide/config-nginx-dns/#instalando-nginx","text":"Vamos acessar nosso IP e ver se a porta 80 j\u00e1 est\u00e1 sendo usada, em seguida iremos instalar nosso sistema de servidor Nginx. $ sudo apt install nginx -y","title":"Instalando Nginx"},{"location":"LABS/MISP/install-guide/config-nginx-dns/#criando-proxy-reverso","text":"Vamos come\u00e7ar deletando o arquivo de configura\u00e7\u00e3o default que vem como o nginx . Podemos fazer isso da seguinte forma: $ sudo rm /etc/nginx/sites-available/default $ sudo rm /etc/nginx/sites-enabled/default Dessa forma exclu\u00edmos os arquivos default, depois iremos criar os nossos. Vamos criar o arquivo /etc/nginx/sites-available/misp , com ele vamos criar um proxy reverso redirecionando a porta 8080 para o dom\u00ednio misp.osintvillage.org. server { server_name website.com ; location / { proxy_pass https://localhost:4433 ; } } N\u00e3o esque\u00e7a de salvar. Agora precisamos realizar um link simb\u00f3lico enviando o arquivo /etc/nginx/sites-available/misp para o endere\u00e7o /etc/nginx/sites-enabled/misp . $ sudo ln -s /etc/nginx/sites-available/misp /etc/nginx/sites-enabled/misp Para verificar se est\u00e1 tudo ok com o nosso arquivo de configura\u00e7\u00e3o iremos realizar o comando. $ sudo nginx -t Precisa ter uma imagem semelhante com a abaixo.","title":"Criando proxy reverso"},{"location":"LABS/MISP/install-guide/config-nginx-dns/#redirecionando-para-dominio-cloudflare","text":"Agora precisamos redirecionar nosso IP para nosso servidor DNS, nesse caso eu uso o CloudFlare para gerenciar meu DNS e assim vou adicionar imagens do processo. Depois de logado no CloudFlare vamos realizar a adi\u00e7\u00e3o do servidor, no meu caso eu vou criar o subdom\u00ednio misp e tem o endere\u00e7o misp.osintvillage.org . N\u00e3o devemos esquecer de salvar. Podemos verificar que nosso MISP est\u00e1 vis\u00edvel no subdom\u00ednio.","title":"Redirecionando para dom\u00ednio - CloudFlare."},{"location":"LABS/MISP/install-guide/config-vps-server/","text":"Configurando nosso servidor na nuvem \u00b6 Nesse passo a passo vamos dar os primeiros passos na configura\u00e7\u00e3o de um servidor na nuvem usando a empresa Digital Ocean e tem como objetivo: Explicar o que \u00e9 VPS Explicar o que \u00e9 SSH Criando seu servidor na Digital Ocean Criando Chave P\u00fablica Configurando SSH para acesso sem chave Alterando porta padr\u00e3o para acesso Permitir acesso via VPN Refer\u00eancia: Esse material foi inspirado em uma apresenta\u00e7\u00e3o que fiz para um antigo time em que eu participei e o link est\u00e1 disponivel: https://github.com/greenmind-sec/init-cloud/ Antes de come\u00e7ar \u00b6 O que \u00e9 \u00b6 VPS (Virtual Private Server) DEFINI\u00c7\u00c2O VPS SSH (Secure Shell) DEFINI\u00c7\u00c2O SSH Criando Digital Ocean \u00b6 Criando uma inst\u00e2ncia na Digital Ocean. Com a nossa conta j\u00e1 criada, vamos clicar no bot\u00e3o que temos no topo. Ou tamb\u00e9m podemos clicar ao lado esquerdo para realizar a cria\u00e7\u00e3o da Droplets. Criando Droplet \u00b6 Inicialmente temos as seguintes op\u00e7\u00f5es: Distribui\u00e7\u00f5es Containers de distribui\u00e7\u00f5es Marketplace Backups Imagem customizada Vamos escolher distribui\u00e7\u00e3o e ir para a Ubuntu 20.04 (LTS) X64 . Escolhendo plano \u00b6 Tome cuidado com o plano, pois inicialmente ele inicia com um valor alto. Vamos usar uma droplet com os seguintes detalhes: 4 GB 2 CPU Intel 80 GB NVMe SSD 4 TB transfer\u00eancia Essas configura\u00e7\u00f5es foram baseadas na documenta\u00e7\u00e3o oficial que est\u00e1 disponivel no site do CERT.BR - Tutorial para a instala\u00e7\u00e3o de MISP em Sistemas Ubuntu Agora vamos escolher a localiza\u00e7\u00e3o que ser\u00e1 hospedado o servidor. Criando senha \u00b6 Tamb\u00e9m podemos configurar uma senha para o servidor e posteriormente realizar as configura\u00e7\u00f5es necess\u00e1rias para a seguran\u00e7a. Depois de adicionar uma senha vamos ter todos esses checks na cor verde. Adicionando backup \u00b6 \u00c9 recomendado usar o backup usado pela digitalocean, e nos ajuda realizando toda semana o backup da imagem. Isso tem o valor de 4.80 dolar por m\u00eas. Adicionando nome ao host \u00b6 Vamos inserir um nome que vamos usar em nosso servidor. Finalizando \u00b6 Podemos agora clicar em Create Droplet para finalizar a cria\u00e7\u00e3o de nosso VPS. Ap\u00f3s clicar vamos ser redirecionados e ver um load. Podemos agora acessar nosso site. Criando chave p\u00fablica e adicionando SSH Key \u00b6 Vamos criar uma chave p\u00fablica, com essa chave \u00e9 usada para o login no servidor e assim n\u00e3o precisando adicionar senha. Vamos adicionar mais tarde uma chave de forma manual. Vamos criar uma chave \u00b6 Em nossa m\u00e1quina local que vamos usar para criar uma chave p\u00fablica, vamos criar usando o seguinte comando. ssh-keygen Lembrando que quando geramos a chave, ela vai ser gerada no diret\u00f3rio atual. Nesse caso eu gerei em um diret\u00f3rio meu que \u00e9 o: /home/greenmind/Documentos/MISP Podemos ver a chave criada no diret\u00f3rio atual. Adicionando chave \u00b6 Vamos copiar a chave usando do diret\u00f3rio em que copiamos, nesse caso \u00e9 o diret\u00f3rio. Vamos at\u00e9 o diret\u00f3rio chamado. cd /home/greenmind/Documentos/MISP Agora vamos ver a nossa chave para adicionarmos no nosso servidor. SSH \u00b6 O que \u00e9 \u00b6 O que \u00e9 o Secure Shell (SSH) Instala\u00e7\u00e3o \u00b6 Instalando no Linux Veja como podemos instalar o openssh client $ sudo apt-get install openssh-client Primeiro Conex\u00e3o \u00b6 J\u00e1 com o openssh-client instalado em nossa m\u00e1quina, vamos pegar o endere\u00e7o IP da m\u00e1quina e realizar o teste. Vamos imaginar que nosso IP \u00e9**134.122.126.167**. ssh root@134.122.126.167 Inicialmente vamos realizar a primeira conex\u00e3o com root para realizar as configura\u00e7\u00f5es necess\u00e1rias. Vamos adicionar a senha criada anteriormente na cria\u00e7\u00e3o do servidor na DigitalOcean e logar no servidor. Criando um novo usu\u00e1rio \u00b6 Vamos adicionar um novo usu\u00e1rio. # adduser misp Vamos criar nosso usu\u00e1rio para o sistema e assim evitar o uso do root. Adicionando ao grupo sudo \u00b6 Por motivos de seguran\u00e7a n\u00e3o \u00e9 recomendado usar o root e assim podemos usar o sudo . Vamos instalar o sudo . # apt-get install sudo Vamos adicionar ele ao grupo sudo # adduser misp sudo N\u00e3o podemos esquecer de ver se o diret\u00f3rio ~/.ssh est\u00e1 criado, sen\u00e3o vamos criar usando o comando: $ mkdir ~/.ssh O ~/ \u00e9 usado para se referenciar ao diret\u00f3rio /home/ do usu\u00e1rio usado, no caso do nosso usu\u00e1rio misp ficaria assim /home/misp/ . Adicionando Public Key \u00b6 Vamos logar no usu\u00e1rio misp e realizar a configura\u00e7\u00e3o para adicionar a public-key. Vamos at\u00e9 o arquivo authorized_keys . $ nano /home/misp/.ssh/authorized_keys Vamos copiar a chave p\u00fablica de nossa m\u00e1quina para a m\u00e1quina VPS que est\u00e1 na cloud. Liberando acesso via public-key \u00b6 Ser\u00e1 necess\u00e1rio abrir o arquivo usando um editor para realizar algumas modifica\u00e7\u00f5es. $ sudo nano /etc/ssh/sshd_config Em seguida para que as configura\u00e7\u00f5es sejam efetuadas podemos realizar o restart do servi\u00e7o. $ sudo service ssh restart Vamos deixar as configura\u00e7\u00f5es iguais \u00e0 imagem acima. Caso tenha d\u00favidas segue o passo a passo: Vamos entrar no arquivo /etc/ssh/ssh_config e editar ele. Retirando login senha Inserindo login por chave p\u00fablica Podemos descomentar a linha PasswordAuthentication yes e mudar para no . Retirando login root Vamos alterar de PermitRootLogin yes para PermitRootLogin no . Perigos de logando por senha Logando por senha voc\u00ea pode ser hackeado ou at\u00e9 receber um ataque de brute. Depois de realizar todas as configura\u00e7\u00f5es vamos realizar um restart no servi\u00e7o $ sudo service ssh restart Logando no sistema \u00b6 Podemos agora logar no sistema usando o usu\u00e1rio misp . ssh misp@134.122.126.167 -i lab-misp","title":"1. Config VPS Server"},{"location":"LABS/MISP/install-guide/config-vps-server/#configurando-nosso-servidor-na-nuvem","text":"Nesse passo a passo vamos dar os primeiros passos na configura\u00e7\u00e3o de um servidor na nuvem usando a empresa Digital Ocean e tem como objetivo: Explicar o que \u00e9 VPS Explicar o que \u00e9 SSH Criando seu servidor na Digital Ocean Criando Chave P\u00fablica Configurando SSH para acesso sem chave Alterando porta padr\u00e3o para acesso Permitir acesso via VPN Refer\u00eancia: Esse material foi inspirado em uma apresenta\u00e7\u00e3o que fiz para um antigo time em que eu participei e o link est\u00e1 disponivel: https://github.com/greenmind-sec/init-cloud/","title":"Configurando nosso servidor na nuvem"},{"location":"LABS/MISP/install-guide/config-vps-server/#antes-de-comecar","text":"","title":"Antes de come\u00e7ar"},{"location":"LABS/MISP/install-guide/config-vps-server/#o-que-e","text":"VPS (Virtual Private Server) DEFINI\u00c7\u00c2O VPS SSH (Secure Shell) DEFINI\u00c7\u00c2O SSH","title":"O que \u00e9"},{"location":"LABS/MISP/install-guide/config-vps-server/#criando-digital-ocean","text":"Criando uma inst\u00e2ncia na Digital Ocean. Com a nossa conta j\u00e1 criada, vamos clicar no bot\u00e3o que temos no topo. Ou tamb\u00e9m podemos clicar ao lado esquerdo para realizar a cria\u00e7\u00e3o da Droplets.","title":"Criando Digital Ocean"},{"location":"LABS/MISP/install-guide/config-vps-server/#criando-droplet","text":"Inicialmente temos as seguintes op\u00e7\u00f5es: Distribui\u00e7\u00f5es Containers de distribui\u00e7\u00f5es Marketplace Backups Imagem customizada Vamos escolher distribui\u00e7\u00e3o e ir para a Ubuntu 20.04 (LTS) X64 .","title":"Criando Droplet"},{"location":"LABS/MISP/install-guide/config-vps-server/#escolhendo-plano","text":"Tome cuidado com o plano, pois inicialmente ele inicia com um valor alto. Vamos usar uma droplet com os seguintes detalhes: 4 GB 2 CPU Intel 80 GB NVMe SSD 4 TB transfer\u00eancia Essas configura\u00e7\u00f5es foram baseadas na documenta\u00e7\u00e3o oficial que est\u00e1 disponivel no site do CERT.BR - Tutorial para a instala\u00e7\u00e3o de MISP em Sistemas Ubuntu Agora vamos escolher a localiza\u00e7\u00e3o que ser\u00e1 hospedado o servidor.","title":"Escolhendo plano"},{"location":"LABS/MISP/install-guide/config-vps-server/#criando-senha","text":"Tamb\u00e9m podemos configurar uma senha para o servidor e posteriormente realizar as configura\u00e7\u00f5es necess\u00e1rias para a seguran\u00e7a. Depois de adicionar uma senha vamos ter todos esses checks na cor verde.","title":"Criando senha"},{"location":"LABS/MISP/install-guide/config-vps-server/#adicionando-backup","text":"\u00c9 recomendado usar o backup usado pela digitalocean, e nos ajuda realizando toda semana o backup da imagem. Isso tem o valor de 4.80 dolar por m\u00eas.","title":"Adicionando backup"},{"location":"LABS/MISP/install-guide/config-vps-server/#adicionando-nome-ao-host","text":"Vamos inserir um nome que vamos usar em nosso servidor.","title":"Adicionando nome ao host"},{"location":"LABS/MISP/install-guide/config-vps-server/#finalizando","text":"Podemos agora clicar em Create Droplet para finalizar a cria\u00e7\u00e3o de nosso VPS. Ap\u00f3s clicar vamos ser redirecionados e ver um load. Podemos agora acessar nosso site.","title":"Finalizando"},{"location":"LABS/MISP/install-guide/config-vps-server/#criando-chave-publica-e-adicionando-ssh-key","text":"Vamos criar uma chave p\u00fablica, com essa chave \u00e9 usada para o login no servidor e assim n\u00e3o precisando adicionar senha. Vamos adicionar mais tarde uma chave de forma manual.","title":"Criando chave p\u00fablica e adicionando SSH Key"},{"location":"LABS/MISP/install-guide/config-vps-server/#vamos-criar-uma-chave","text":"Em nossa m\u00e1quina local que vamos usar para criar uma chave p\u00fablica, vamos criar usando o seguinte comando. ssh-keygen Lembrando que quando geramos a chave, ela vai ser gerada no diret\u00f3rio atual. Nesse caso eu gerei em um diret\u00f3rio meu que \u00e9 o: /home/greenmind/Documentos/MISP Podemos ver a chave criada no diret\u00f3rio atual.","title":"Vamos criar uma chave"},{"location":"LABS/MISP/install-guide/config-vps-server/#adicionando-chave","text":"Vamos copiar a chave usando do diret\u00f3rio em que copiamos, nesse caso \u00e9 o diret\u00f3rio. Vamos at\u00e9 o diret\u00f3rio chamado. cd /home/greenmind/Documentos/MISP Agora vamos ver a nossa chave para adicionarmos no nosso servidor.","title":"Adicionando chave"},{"location":"LABS/MISP/install-guide/config-vps-server/#ssh","text":"","title":"SSH"},{"location":"LABS/MISP/install-guide/config-vps-server/#o-que-e_1","text":"O que \u00e9 o Secure Shell (SSH)","title":"O que \u00e9"},{"location":"LABS/MISP/install-guide/config-vps-server/#instalacao","text":"Instalando no Linux Veja como podemos instalar o openssh client $ sudo apt-get install openssh-client","title":"Instala\u00e7\u00e3o"},{"location":"LABS/MISP/install-guide/config-vps-server/#primeiro-conexao","text":"J\u00e1 com o openssh-client instalado em nossa m\u00e1quina, vamos pegar o endere\u00e7o IP da m\u00e1quina e realizar o teste. Vamos imaginar que nosso IP \u00e9**134.122.126.167**. ssh root@134.122.126.167 Inicialmente vamos realizar a primeira conex\u00e3o com root para realizar as configura\u00e7\u00f5es necess\u00e1rias. Vamos adicionar a senha criada anteriormente na cria\u00e7\u00e3o do servidor na DigitalOcean e logar no servidor.","title":"Primeiro Conex\u00e3o"},{"location":"LABS/MISP/install-guide/config-vps-server/#criando-um-novo-usuario","text":"Vamos adicionar um novo usu\u00e1rio. # adduser misp Vamos criar nosso usu\u00e1rio para o sistema e assim evitar o uso do root.","title":"Criando um novo usu\u00e1rio"},{"location":"LABS/MISP/install-guide/config-vps-server/#adicionando-ao-grupo-sudo","text":"Por motivos de seguran\u00e7a n\u00e3o \u00e9 recomendado usar o root e assim podemos usar o sudo . Vamos instalar o sudo . # apt-get install sudo Vamos adicionar ele ao grupo sudo # adduser misp sudo N\u00e3o podemos esquecer de ver se o diret\u00f3rio ~/.ssh est\u00e1 criado, sen\u00e3o vamos criar usando o comando: $ mkdir ~/.ssh O ~/ \u00e9 usado para se referenciar ao diret\u00f3rio /home/ do usu\u00e1rio usado, no caso do nosso usu\u00e1rio misp ficaria assim /home/misp/ .","title":"Adicionando ao grupo sudo"},{"location":"LABS/MISP/install-guide/config-vps-server/#adicionando-public-key","text":"Vamos logar no usu\u00e1rio misp e realizar a configura\u00e7\u00e3o para adicionar a public-key. Vamos at\u00e9 o arquivo authorized_keys . $ nano /home/misp/.ssh/authorized_keys Vamos copiar a chave p\u00fablica de nossa m\u00e1quina para a m\u00e1quina VPS que est\u00e1 na cloud.","title":"Adicionando Public Key"},{"location":"LABS/MISP/install-guide/config-vps-server/#liberando-acesso-via-public-key","text":"Ser\u00e1 necess\u00e1rio abrir o arquivo usando um editor para realizar algumas modifica\u00e7\u00f5es. $ sudo nano /etc/ssh/sshd_config Em seguida para que as configura\u00e7\u00f5es sejam efetuadas podemos realizar o restart do servi\u00e7o. $ sudo service ssh restart Vamos deixar as configura\u00e7\u00f5es iguais \u00e0 imagem acima. Caso tenha d\u00favidas segue o passo a passo: Vamos entrar no arquivo /etc/ssh/ssh_config e editar ele. Retirando login senha Inserindo login por chave p\u00fablica Podemos descomentar a linha PasswordAuthentication yes e mudar para no . Retirando login root Vamos alterar de PermitRootLogin yes para PermitRootLogin no . Perigos de logando por senha Logando por senha voc\u00ea pode ser hackeado ou at\u00e9 receber um ataque de brute. Depois de realizar todas as configura\u00e7\u00f5es vamos realizar um restart no servi\u00e7o $ sudo service ssh restart","title":"Liberando acesso via public-key"},{"location":"LABS/MISP/install-guide/config-vps-server/#logando-no-sistema","text":"Podemos agora logar no sistema usando o usu\u00e1rio misp . ssh misp@134.122.126.167 -i lab-misp","title":"Logando no sistema"},{"location":"LABS/MISP/install-guide/create-domain/","text":"Criando dom\u00ednio \u00b6 Criando dom\u00ednios \u00b6 Dom\u00ednios gratuitas \u00b6 Muitos podem n\u00e3o ter dinheiro para come\u00e7ar os labs, devido a isso muitos optam por criar dom\u00ednios gratuitos. Dominio .tk \u00b6 http://www.dot.tk/pt/index.html Dom\u00ednios pagos \u00b6 Abaixo algumas recomenda\u00e7\u00f5es de lugares para comprar dom\u00ednios com pre\u00e7o acess\u00edvel. Dominios baratos \u00b6 https://registro.br/ https://www.hostinger.com.br/registro-de-dominio https://www.godaddy.com/pt-br/dominios https://superdominios.org/ TLDs \u00b6 Aqui compartilho uma lista completa dispon\u00edvel e as novidades que ser\u00e3o lan\u00e7adas em TLDs. TLDs de A a Z","title":"4. Extra - Criando dominio"},{"location":"LABS/MISP/install-guide/create-domain/#criando-dominio","text":"","title":"Criando dom\u00ednio"},{"location":"LABS/MISP/install-guide/create-domain/#criando-dominios","text":"","title":"Criando dom\u00ednios"},{"location":"LABS/MISP/install-guide/create-domain/#dominios-gratuitas","text":"Muitos podem n\u00e3o ter dinheiro para come\u00e7ar os labs, devido a isso muitos optam por criar dom\u00ednios gratuitos.","title":"Dom\u00ednios gratuitas"},{"location":"LABS/MISP/install-guide/create-domain/#dominio-tk","text":"http://www.dot.tk/pt/index.html","title":"Dominio .tk"},{"location":"LABS/MISP/install-guide/create-domain/#dominios-pagos","text":"Abaixo algumas recomenda\u00e7\u00f5es de lugares para comprar dom\u00ednios com pre\u00e7o acess\u00edvel.","title":"Dom\u00ednios pagos"},{"location":"LABS/MISP/install-guide/create-domain/#dominios-baratos","text":"https://registro.br/ https://www.hostinger.com.br/registro-de-dominio https://www.godaddy.com/pt-br/dominios https://superdominios.org/","title":"Dominios baratos"},{"location":"LABS/MISP/install-guide/create-domain/#tlds","text":"Aqui compartilho uma lista completa dispon\u00edvel e as novidades que ser\u00e3o lan\u00e7adas em TLDs. TLDs de A a Z","title":"TLDs"},{"location":"LABS/MISP/install-guide/create-org-misp/","text":"Criando organiza\u00e7\u00e3o ao MISP \u00b6 Listando organiza\u00e7\u00f5es existentes \u00b6 Dentro de um MISP pode existir diversas organiza\u00e7\u00f5es, por padr\u00e3o temos a ORGNAME , mas vamos criar uma nova organiza\u00e7\u00e3o. Podemos ver todas as organiza\u00e7\u00f5es dispon\u00edveis no endere\u00e7o. https://misp.osintvillage.org/organisations/index Substitua o https://misp.osintvillage.org pela sua organiza\u00e7\u00e3o. Podemos ver que j\u00e1 temos a organiza\u00e7\u00e3o ORGNAME criada. Criando nova organiza\u00e7\u00e3o \u00b6 Por padr\u00e3o ela vem dessa forma. Vamos adicionar \u00e0 nossa organiza\u00e7\u00e3o as seguintes informa\u00e7\u00f5es. Organiza\u00e7\u00e3o Nome UUID(ID identificador da organiza\u00e7\u00e3o, n\u00famero \u00fanico) Esse ID \u00e9 compartilhado a qualquer comunidade e qualquer inst\u00e2ncia. Logo(Imagem do projeto) Nacionalidade(Pa\u00eds do projeto) Se\u00e7\u00e3o(Setor que a empresa \u00e9: financeiro, educacional, etc) Tipo de organiza\u00e7\u00e3o(Descri\u00e7\u00e3o da organiza\u00e7\u00e3o) Detalhes do contato Por fim, vai ficar dessa maneira. Se der tudo certo. Podemos ver as informa\u00e7\u00f5es da nossa organiza\u00e7\u00e3o que acabamos de criar.","title":"8. Criando organiza\u00e7\u00e3o no MISP"},{"location":"LABS/MISP/install-guide/create-org-misp/#criando-organizacao-ao-misp","text":"","title":"Criando organiza\u00e7\u00e3o ao MISP"},{"location":"LABS/MISP/install-guide/create-org-misp/#listando-organizacoes-existentes","text":"Dentro de um MISP pode existir diversas organiza\u00e7\u00f5es, por padr\u00e3o temos a ORGNAME , mas vamos criar uma nova organiza\u00e7\u00e3o. Podemos ver todas as organiza\u00e7\u00f5es dispon\u00edveis no endere\u00e7o. https://misp.osintvillage.org/organisations/index Substitua o https://misp.osintvillage.org pela sua organiza\u00e7\u00e3o. Podemos ver que j\u00e1 temos a organiza\u00e7\u00e3o ORGNAME criada.","title":"Listando organiza\u00e7\u00f5es existentes"},{"location":"LABS/MISP/install-guide/create-org-misp/#criando-nova-organizacao","text":"Por padr\u00e3o ela vem dessa forma. Vamos adicionar \u00e0 nossa organiza\u00e7\u00e3o as seguintes informa\u00e7\u00f5es. Organiza\u00e7\u00e3o Nome UUID(ID identificador da organiza\u00e7\u00e3o, n\u00famero \u00fanico) Esse ID \u00e9 compartilhado a qualquer comunidade e qualquer inst\u00e2ncia. Logo(Imagem do projeto) Nacionalidade(Pa\u00eds do projeto) Se\u00e7\u00e3o(Setor que a empresa \u00e9: financeiro, educacional, etc) Tipo de organiza\u00e7\u00e3o(Descri\u00e7\u00e3o da organiza\u00e7\u00e3o) Detalhes do contato Por fim, vai ficar dessa maneira. Se der tudo certo. Podemos ver as informa\u00e7\u00f5es da nossa organiza\u00e7\u00e3o que acabamos de criar.","title":"Criando nova organiza\u00e7\u00e3o"},{"location":"LABS/MISP/install-guide/create-vpn/","text":"Criando servidor VPN \u00b6 Criando clientes \u00b6 Adicionando conex\u00e3o entre os MISP \u00b6 Vamos precisar que os dois MISP's se comuniquem, isso porque estamos criando uma instancia entre 2 servidores. Ambiente de homolog tem o IP 200.123.210.1 Ambiente de prod tem o IP 200.123.210.2 No Ambiente de homolog ufw allow from 200 .123.210.2 to any port 80 ufw allow from 200 .123.210.2 to any port 443 Nesse caso vamos permitir que o Ambiente de prod tem o IP 200.123.210.2 se comunique com o ambiente de homolog. No Ambiente de prod ufw allow from 200 .123.210.1 to any port 80 ufw allow from 200 .123.210.1 to any port 443 Nesse caso vamos permitir que o Ambiente de homolog tem o IP 200.123.210.1 se comunique com o ambiente de prod.","title":"Create vpn"},{"location":"LABS/MISP/install-guide/create-vpn/#criando-servidor-vpn","text":"","title":"Criando servidor VPN"},{"location":"LABS/MISP/install-guide/create-vpn/#criando-clientes","text":"","title":"Criando clientes"},{"location":"LABS/MISP/install-guide/create-vpn/#adicionando-conexao-entre-os-misp","text":"Vamos precisar que os dois MISP's se comuniquem, isso porque estamos criando uma instancia entre 2 servidores. Ambiente de homolog tem o IP 200.123.210.1 Ambiente de prod tem o IP 200.123.210.2 No Ambiente de homolog ufw allow from 200 .123.210.2 to any port 80 ufw allow from 200 .123.210.2 to any port 443 Nesse caso vamos permitir que o Ambiente de prod tem o IP 200.123.210.2 se comunique com o ambiente de homolog. No Ambiente de prod ufw allow from 200 .123.210.1 to any port 80 ufw allow from 200 .123.210.1 to any port 443 Nesse caso vamos permitir que o Ambiente de homolog tem o IP 200.123.210.1 se comunique com o ambiente de prod.","title":"Adicionando conex\u00e3o entre os MISP"},{"location":"LABS/MISP/install-guide/install-docker/","text":"Instalando Docker \u00b6 Estamos usando o sistema operacional Ubuntu , mas poderia ser feito em qualquer sistema com base Debian . Atualizando sistema \u00b6 Podemos atualizar o sistema operacional usando o APT . $ sudo apt update Instalando o GIT \u00b6 Podemos verificar se o GIT est\u00e1 instalado em seu servidor, com o seguinte comando. $ git -h Caso n\u00e3o tenha e deseja instalar: $ sudo apt install git Instalando Docker \u00b6 Requisitos m\u00ednimos \u00b6 Vamos instalar os requisitos para a instala\u00e7\u00e3o do Docker em nossa VPS: $ sudo apt install apt-transport-https ca-certificates curl gnupg2 software-properties-common -y Adicionando chave Docker \u00b6 curl -fsSL https://download.docker.com/linux/ $( . /etc/os-release ; echo \" $ID \" ) /gpg | sudo apt-key add - Adicionando reposit\u00f3rio \u00b6 Podemos adicionar o reposit\u00f3rio em nosso sistema $ sudo add-apt-repository \"deb [arch=amd64] https://download.docker.com/linux/ $( . /etc/os-release ; echo \" $ID \" ) $( lsb_release -cs ) stable\" Agora podemos agora atualizar nosso sistema. $ sudo apt update Instalando Docker e Docker-Compose \u00b6 Podemos agora instalar o Docker. $ sudo apt install docker-ce -y Tamb\u00e9m temos a instala\u00e7\u00e3o do docker-compose. sudo apt install docker-compose -y Extra - Criando Script \u00b6 Podemos criar um script para nos ajudar na automatiza\u00e7\u00e3o dessa instala\u00e7\u00e3o. Vamos usar o shell script para isso. Irei criar um script chamado install_docker.sh . apt-get update apt-get install apt-transport-https ca-certificates curl gnupg2 software-properties-common -y curl -fsSL https://download.docker.com/linux/ $( . /etc/os-release ; echo \" $ID \" ) /gpg | sudo apt-key add - apt-key fingerprint 0EBFCD88 add-apt-repository \"deb [arch=amd64] https://download.docker.com/linux/ $( . /etc/os-release ; echo \" $ID \" ) $( lsb_release -cs ) stable\" apt-get update apt-get install docker-ce -y apt-get install docker-compose -y Depois de criar, vamos dar permiss\u00e3o de execu\u00e7\u00e3o(que \u00e9 necess\u00e1rio para executar um arquivo shell script). chmod +x install_docker.sh Vamos executar para realizar a execu\u00e7\u00e3o. sudo ./install_docker.sh https://gist.github.com/greenmind-sec/e191481b4fa6ab33b3ed1250e9aaf66a Extra - Post Install \u00b6 Por motivos de seguran\u00e7a vamos adicionar o docker. Vamos criar um grupo(Caso n\u00e3o tenha sido criada) $ sudo groupadd docker Agora adicione o usu\u00e1rio ao grupo docker. $ sudo usermod -aG docker $USER https://docs.docker.com/engine/install/linux-postinstall/ Instalando Docker-compose \u00b6 Podemos ter problemas durante a instala\u00e7\u00e3o do docker-compose, podemos instalar ele usando o pip3 . Vamos instalar os requisitos m\u00ednimos: $ sudo apt update $ sudo apt install python3-pip -y Instalando o docker-compose: $ sudo pip3 install docker-compose","title":"2. Install Docker"},{"location":"LABS/MISP/install-guide/install-docker/#instalando-docker","text":"Estamos usando o sistema operacional Ubuntu , mas poderia ser feito em qualquer sistema com base Debian .","title":"Instalando Docker"},{"location":"LABS/MISP/install-guide/install-docker/#atualizando-sistema","text":"Podemos atualizar o sistema operacional usando o APT . $ sudo apt update","title":"Atualizando sistema"},{"location":"LABS/MISP/install-guide/install-docker/#instalando-o-git","text":"Podemos verificar se o GIT est\u00e1 instalado em seu servidor, com o seguinte comando. $ git -h Caso n\u00e3o tenha e deseja instalar: $ sudo apt install git","title":"Instalando o GIT"},{"location":"LABS/MISP/install-guide/install-docker/#instalando-docker_1","text":"","title":"Instalando Docker"},{"location":"LABS/MISP/install-guide/install-docker/#requisitos-minimos","text":"Vamos instalar os requisitos para a instala\u00e7\u00e3o do Docker em nossa VPS: $ sudo apt install apt-transport-https ca-certificates curl gnupg2 software-properties-common -y","title":"Requisitos m\u00ednimos"},{"location":"LABS/MISP/install-guide/install-docker/#adicionando-chave-docker","text":"curl -fsSL https://download.docker.com/linux/ $( . /etc/os-release ; echo \" $ID \" ) /gpg | sudo apt-key add -","title":"Adicionando chave Docker"},{"location":"LABS/MISP/install-guide/install-docker/#adicionando-repositorio","text":"Podemos adicionar o reposit\u00f3rio em nosso sistema $ sudo add-apt-repository \"deb [arch=amd64] https://download.docker.com/linux/ $( . /etc/os-release ; echo \" $ID \" ) $( lsb_release -cs ) stable\" Agora podemos agora atualizar nosso sistema. $ sudo apt update","title":"Adicionando reposit\u00f3rio"},{"location":"LABS/MISP/install-guide/install-docker/#instalando-docker-e-docker-compose","text":"Podemos agora instalar o Docker. $ sudo apt install docker-ce -y Tamb\u00e9m temos a instala\u00e7\u00e3o do docker-compose. sudo apt install docker-compose -y","title":"Instalando Docker e Docker-Compose"},{"location":"LABS/MISP/install-guide/install-docker/#extra-criando-script","text":"Podemos criar um script para nos ajudar na automatiza\u00e7\u00e3o dessa instala\u00e7\u00e3o. Vamos usar o shell script para isso. Irei criar um script chamado install_docker.sh . apt-get update apt-get install apt-transport-https ca-certificates curl gnupg2 software-properties-common -y curl -fsSL https://download.docker.com/linux/ $( . /etc/os-release ; echo \" $ID \" ) /gpg | sudo apt-key add - apt-key fingerprint 0EBFCD88 add-apt-repository \"deb [arch=amd64] https://download.docker.com/linux/ $( . /etc/os-release ; echo \" $ID \" ) $( lsb_release -cs ) stable\" apt-get update apt-get install docker-ce -y apt-get install docker-compose -y Depois de criar, vamos dar permiss\u00e3o de execu\u00e7\u00e3o(que \u00e9 necess\u00e1rio para executar um arquivo shell script). chmod +x install_docker.sh Vamos executar para realizar a execu\u00e7\u00e3o. sudo ./install_docker.sh https://gist.github.com/greenmind-sec/e191481b4fa6ab33b3ed1250e9aaf66a","title":"Extra - Criando Script"},{"location":"LABS/MISP/install-guide/install-docker/#extra-post-install","text":"Por motivos de seguran\u00e7a vamos adicionar o docker. Vamos criar um grupo(Caso n\u00e3o tenha sido criada) $ sudo groupadd docker Agora adicione o usu\u00e1rio ao grupo docker. $ sudo usermod -aG docker $USER https://docs.docker.com/engine/install/linux-postinstall/","title":"Extra - Post Install"},{"location":"LABS/MISP/install-guide/install-docker/#instalando-docker-compose","text":"Podemos ter problemas durante a instala\u00e7\u00e3o do docker-compose, podemos instalar ele usando o pip3 . Vamos instalar os requisitos m\u00ednimos: $ sudo apt update $ sudo apt install python3-pip -y Instalando o docker-compose: $ sudo pip3 install docker-compose","title":"Instalando Docker-compose"},{"location":"LABS/MISP/install-guide/install-misp-docker/","text":"Antes de come\u00e7ar \u00b6 Para seguir os pr\u00f3ximos passos precisamos ter realizado os seguintes passos: Criar servidor Criar usu\u00e1rio Adicionar chave p\u00fablica Validar acesso Em seguida vamos realizar a conex\u00e3o via SSH usando a chave p\u00fablica criada anteriormente. Clonando repositorio do MISP Docker \u00b6 Vamos ir at\u00e9 o diret\u00f3rio em que queremos realizar o clone(baixar o projeto), vai da sua prefer\u00eancia, mas irei usar o local. Vou criar um diret\u00f3rio chamado LABS e vou clonar o projeto nesse diret\u00f3rio. Vamos instalar o git , caso j\u00e1 tenha instalado n\u00e3o tem problemas. $ sudo apt update $ sudo apt install git -y Vamos agora clonar o MISP Docker. git clone https://github.com/MISP/misp-docker J\u00e1 temos nosso c\u00f3digo necess\u00e1rio para dar in\u00edcio ao nosso MISP. Configura\u00e7\u00f5es iniciais \u00b6 J\u00e1 dentro do diret\u00f3rio clonado do MISP vamos realizar algumas configura\u00e7\u00f5es necess\u00e1rias, nesse caso vamos alterar o arquivo template.env e criar um arquivo chamado .env . cp template.env .env Vamos ver como \u00e9 esse arquivo completo por padr\u00e3o: MYSQL_HOST = misp_db MYSQL_DATABASE = misp MYSQL_USER = misp MYSQL_PASSWORD = misp MYSQL_ROOT_PASSWORD = misp MISP_ADMIN_EMAIL = admin@admin.test MISP_ADMIN_PASSPHRASE = admin MISP_BASEURL = localhost POSTFIX_RELAY_HOST = relay.fqdn TIMEZONE = Europe/Brussels DATA_DIR = ./data Nesse arquivo vamos realizar configura\u00e7\u00f5es usadas em nossa infraestrutura. Informa\u00e7\u00f5es do Banco de Dados: \u00b6 MYSQL_HOST \u00b6 Servidor Mysql usado como banco de dados, pelo docker trabalhar com nomes, iremos deixar com esse mesmo nome. MYSQL_HOST = misp_db Caso desejar usar outro servidor Mysql, ser\u00e1 necessario colocar o nome ou IP. MYSQL_DATABASE \u00b6 Nome da Base de Dados que vamos usar no MISP, por padr\u00e3o irei deixar como misp. MYSQL_DATABASE = misp Caso prefira outro nome fique a vontade para alterar. MYSQL_USER \u00b6 Usu\u00e1rio usado no Banco de Dados vem por padr\u00e3o como misp, mas irei deixar com esse nome. MYSQL_USER = misp Caso prefira outro nome fique a vontade para alterar. MYSQL_PASSWORD \u00b6 O MYSQL_PASSWORD \u00e9 a senha usada pelo usu\u00e1rio usado no Banco de Dados, eu recomendo a cria\u00e7\u00e3o aleat\u00f3ria dessa senha e assim evitando problemas futuros. Vamos gerar usando gpg . gpg --gen-random --armor 1 32 O resultado vai ser algo como: dW04q/VaYxPLkyLKQSBkI5uJu3lhAHBE7twNkMUVN3g = O resultado ficaria dessa forma: MYSQL_PASSWORD = \"dW04q/VaYxPLkyLKQSBkI5uJu3lhAHBE7twNkMUVN3g=\" MYSQL_ROOT_PASSWORD \u00b6 A MYSQL_ROOT_PASSWORD \u00e9 a senha do usu\u00e1rio root, tome cuidado com essa senha pois com ela pode ter acesso total ao seu banco de dados. gpg --gen-random --armor 1 32 O resultado vai ser algo como: 3rbLJJseE+KJE7fkjiJT7qe6dUlaKc63pIHgCE+XeAo = O resultado ficaria dessa forma: MYSQL_ROOT_PASSWORD = \"3rbLJJseE+KJE7fkjiJT7qe6dUlaKc63pIHgCE+XeAo=\" Informa\u00e7\u00f5es do Usu\u00e1rio Admin \u00b6 Vamos configurar com os valores abaixo os valores default do usu\u00e1rio admin do MISP. MISP_ADMIN_EMAIL \u00b6 Esse \u00e9 o email usado pelo administrador do MISP. Por padr\u00e3o ele vem dessa forma, podemos deixar assim e alterar posteriormente. MISP_ADMIN_EMAIL = admin@admin.test Voc\u00ea pode alterar esse por um email de sua escolha. MISP_ADMIN_PASSPHRASE \u00b6 Essa \u00e9 a senha usada para o usu\u00e1rio acima que ir\u00e1 administrar o banco de dados. Independente da senha que for adicionada, vamos alterar no primeiro login. Dessa forma n\u00e3o temos problema em deixar a senha admin , j\u00e1 que vamos alterar quando entrar na primeira vez no MISP. MISP_ADMIN_PASSPHRASE = admin Caso prefira alterar o valor padr\u00e3o, sem problemas. Informa\u00e7\u00f5es da Base URL \u00b6 MISP_BASEURL \u00b6 Essa \u00e9 a URL usada pelo MISP, vamos deixar assim devido ao uso de Docker, mas vamos alterar no sistema posteriormente. MISP_BASEURL = localhost Informa\u00e7\u00f5es para Envio de Email \u00b6 POSTFIX_RELAY_HOST \u00b6 Responsavel pelo envio de emails, por ser um relay podemos enviar email do gmail por exemplo. POSTFIX_RELAY_HOST = relay.fqdn Posteriormente iremos configurar o envio de email e a cria\u00e7\u00e3o de um servidor usando Docker. Informa\u00e7\u00f5es do Hor\u00e1rio usado no MISP \u00b6 TIMEZONE \u00b6 Timezone usado pelo seu MISP, por padr\u00e3o ele tem o valor: TIMEZONE = Europe/Brussels Vamos alterar para o valor abaixo: TIMEZONE = America/Sao_Paulo Usei como exemplo o site abaixo: - https://www.zeitverschiebung.net/en/timezone/america--sao_paulo Criando diret\u00f3rio para armazenamento de volumes \u00b6 DATA_DIR \u00b6 Local onde ser\u00e1 armazenado os arquivos do MISP, isso acontece devido ao Docker trabalhar de forma isolada e assim caso o container seja reiniciado os dados continuam salvos. Aviso: O uso de volumes \u00e9 muito importante caso queira a persist\u00eancia de dados, como avisei acima, caso n\u00e3o seja feita essa configura\u00e7\u00e3o ser\u00e1 perdido os dados. Irei criar um diret\u00f3rio no meu servidor HOST no local /srv/LABS/MISP : $ mkdir /srv/LABS/MISP Realizando as configura\u00e7\u00f5es necess\u00e1rias - .env \u00b6 Irei usar o editor nano para realizar a edi\u00e7\u00e3o do arquivo via linha de comando, veja um exemplo de como ficou meu arquivo de configura\u00e7\u00e3o. MYSQL_HOST = misp_db MYSQL_DATABASE = misp MYSQL_USER = misp MYSQL_PASSWORD = h9BSaYB5pfvnQQPTWsgQFU4oTYwsVp9vVoMv0vy4kCc = MYSQL_ROOT_PASSWORD = 3rbLJJseE+KJE7fkjiJT7qe6dUlaKc63pIHgCE+XeAo = MISP_ADMIN_EMAIL = misp.admin@osintvillage.org MISP_ADMIN_PASSPHRASE = +5r0sYdPAVOXwrxCpdDZrBc6YxvnIjHY6oGkKcMwcy4 = MISP_BASEURL = localhost POSTFIX_RELAY_HOST = relay.fqdn TIMEZONE = America/Sao_Paulo DATA_DIR = /srv/LABS/MISP Configura\u00e7\u00f5es necess\u00e1rias - docker-compose.yml \u00b6 Por padr\u00e3o esse \u00e9 o arquivo docker-compose.yml que temos no reposit\u00f3rio do projeto. version: '3' services: web: build: web depends_on: - db container_name: misp_web image: misp:latest restart: unless-stopped ports: - \"80:80\" - \"443:443\" volumes: - ./web/wait-for-it.sh:/usr/local/bin/wait-for-it.sh:ro - /dev/urandom:/dev/random - ${DATA_DIR}/web:/var/www/MISP environment: - MYSQL_HOST=${MYSQL_HOST} - MYSQL_DATABASE=${MYSQL_DATABASE} - MYSQL_USER=${MYSQL_USER} - MYSQL_PASSWORD=${MYSQL_PASSWORD} - MISP_ADMIN_EMAIL=${MISP_ADMIN_EMAIL} - MISP_ADMIN_PASSPHRASE=${MISP_ADMIN_PASSPHRASE} - MISP_BASEURL=${MISP_BASEURL} - POSTFIX_RELAY_HOST=${POSTFIX_RELAY_HOST} - TIMEZONE=${TIMEZONE} entrypoint: \"wait-for-it.sh -t 0 -h db -p 3306 -- /run.sh\" db: container_name: misp_db image: mysql/mysql-server:5.7 restart: unless-stopped volumes: - ${DATA_DIR}/db:/var/lib/mysql environment: - MYSQL_DATABASE=${MYSQL_DATABASE} - MYSQL_USER=${MYSQL_USER} - MYSQL_PASSWORD=${MYSQL_PASSWORD} - MYSQL_ROOT_PASSWORD=${MYSQL_ROOT_PASSWORD} Vamos alterar apenas 2 pontos, que s\u00e3o: ports: - \"80:80\" - \"443:443\" Posteriormente iremos instalar o nginx , por padr\u00e3o ele vai usar essa as portas 80 e 443 . Devido a isso vamos alterar as portas de sa\u00edda do nosso misp e alterar inv\u00e9s de usar a 80 e 443 para 8080 e 4433 . ports: - \"8080:80\" - \"4433:443\" Build da imagem Docker \u00b6 Depois de realizar as configura\u00e7\u00f5es necess\u00e1rias, vamos realizar o build da imagem e podemos realizar isso da seguinte forma: $ docker-compose build --no-cache Podemos ver as imagens dispon\u00edveis usando o comando: $ docker images Subindo MISP \u00b6 Vamos agora subir nosso ambiente MISP usando o docker-compose e assim ver finalmente nosso MISP online. $ docker-compose up -d Podemos ver quais container est\u00e3o rodando usando o comando: $ docker ps No caso meu IP do servidor \u00e9 o 134.122.126.167 e como n\u00e3o tem regra de firewall por enquanto est\u00e1 acess\u00edvel na porta 8080 e 4433 . Configura\u00e7\u00f5es b\u00e1sicas \u00b6 Por mais que seja alterada as configura\u00e7\u00f5es de email de administrador e senha do administrador, para o primeiro acesso ser\u00e1 usado as credenciais: admin@admin.test admin Vamos adicionar os dados abaixo e escolher uma nova senha segura. admin@admin.test admin","title":"3. Install MISP Docker"},{"location":"LABS/MISP/install-guide/install-misp-docker/#antes-de-comecar","text":"Para seguir os pr\u00f3ximos passos precisamos ter realizado os seguintes passos: Criar servidor Criar usu\u00e1rio Adicionar chave p\u00fablica Validar acesso Em seguida vamos realizar a conex\u00e3o via SSH usando a chave p\u00fablica criada anteriormente.","title":"Antes de come\u00e7ar"},{"location":"LABS/MISP/install-guide/install-misp-docker/#clonando-repositorio-do-misp-docker","text":"Vamos ir at\u00e9 o diret\u00f3rio em que queremos realizar o clone(baixar o projeto), vai da sua prefer\u00eancia, mas irei usar o local. Vou criar um diret\u00f3rio chamado LABS e vou clonar o projeto nesse diret\u00f3rio. Vamos instalar o git , caso j\u00e1 tenha instalado n\u00e3o tem problemas. $ sudo apt update $ sudo apt install git -y Vamos agora clonar o MISP Docker. git clone https://github.com/MISP/misp-docker J\u00e1 temos nosso c\u00f3digo necess\u00e1rio para dar in\u00edcio ao nosso MISP.","title":"Clonando repositorio do MISP Docker"},{"location":"LABS/MISP/install-guide/install-misp-docker/#configuracoes-iniciais","text":"J\u00e1 dentro do diret\u00f3rio clonado do MISP vamos realizar algumas configura\u00e7\u00f5es necess\u00e1rias, nesse caso vamos alterar o arquivo template.env e criar um arquivo chamado .env . cp template.env .env Vamos ver como \u00e9 esse arquivo completo por padr\u00e3o: MYSQL_HOST = misp_db MYSQL_DATABASE = misp MYSQL_USER = misp MYSQL_PASSWORD = misp MYSQL_ROOT_PASSWORD = misp MISP_ADMIN_EMAIL = admin@admin.test MISP_ADMIN_PASSPHRASE = admin MISP_BASEURL = localhost POSTFIX_RELAY_HOST = relay.fqdn TIMEZONE = Europe/Brussels DATA_DIR = ./data Nesse arquivo vamos realizar configura\u00e7\u00f5es usadas em nossa infraestrutura.","title":"Configura\u00e7\u00f5es iniciais"},{"location":"LABS/MISP/install-guide/install-misp-docker/#informacoes-do-banco-de-dados","text":"","title":"Informa\u00e7\u00f5es do Banco de Dados:"},{"location":"LABS/MISP/install-guide/install-misp-docker/#mysql_host","text":"Servidor Mysql usado como banco de dados, pelo docker trabalhar com nomes, iremos deixar com esse mesmo nome. MYSQL_HOST = misp_db Caso desejar usar outro servidor Mysql, ser\u00e1 necessario colocar o nome ou IP.","title":"MYSQL_HOST"},{"location":"LABS/MISP/install-guide/install-misp-docker/#mysql_database","text":"Nome da Base de Dados que vamos usar no MISP, por padr\u00e3o irei deixar como misp. MYSQL_DATABASE = misp Caso prefira outro nome fique a vontade para alterar.","title":"MYSQL_DATABASE"},{"location":"LABS/MISP/install-guide/install-misp-docker/#mysql_user","text":"Usu\u00e1rio usado no Banco de Dados vem por padr\u00e3o como misp, mas irei deixar com esse nome. MYSQL_USER = misp Caso prefira outro nome fique a vontade para alterar.","title":"MYSQL_USER"},{"location":"LABS/MISP/install-guide/install-misp-docker/#mysql_password","text":"O MYSQL_PASSWORD \u00e9 a senha usada pelo usu\u00e1rio usado no Banco de Dados, eu recomendo a cria\u00e7\u00e3o aleat\u00f3ria dessa senha e assim evitando problemas futuros. Vamos gerar usando gpg . gpg --gen-random --armor 1 32 O resultado vai ser algo como: dW04q/VaYxPLkyLKQSBkI5uJu3lhAHBE7twNkMUVN3g = O resultado ficaria dessa forma: MYSQL_PASSWORD = \"dW04q/VaYxPLkyLKQSBkI5uJu3lhAHBE7twNkMUVN3g=\"","title":"MYSQL_PASSWORD"},{"location":"LABS/MISP/install-guide/install-misp-docker/#mysql_root_password","text":"A MYSQL_ROOT_PASSWORD \u00e9 a senha do usu\u00e1rio root, tome cuidado com essa senha pois com ela pode ter acesso total ao seu banco de dados. gpg --gen-random --armor 1 32 O resultado vai ser algo como: 3rbLJJseE+KJE7fkjiJT7qe6dUlaKc63pIHgCE+XeAo = O resultado ficaria dessa forma: MYSQL_ROOT_PASSWORD = \"3rbLJJseE+KJE7fkjiJT7qe6dUlaKc63pIHgCE+XeAo=\"","title":"MYSQL_ROOT_PASSWORD"},{"location":"LABS/MISP/install-guide/install-misp-docker/#informacoes-do-usuario-admin","text":"Vamos configurar com os valores abaixo os valores default do usu\u00e1rio admin do MISP.","title":"Informa\u00e7\u00f5es do Usu\u00e1rio Admin"},{"location":"LABS/MISP/install-guide/install-misp-docker/#misp_admin_email","text":"Esse \u00e9 o email usado pelo administrador do MISP. Por padr\u00e3o ele vem dessa forma, podemos deixar assim e alterar posteriormente. MISP_ADMIN_EMAIL = admin@admin.test Voc\u00ea pode alterar esse por um email de sua escolha.","title":"MISP_ADMIN_EMAIL"},{"location":"LABS/MISP/install-guide/install-misp-docker/#misp_admin_passphrase","text":"Essa \u00e9 a senha usada para o usu\u00e1rio acima que ir\u00e1 administrar o banco de dados. Independente da senha que for adicionada, vamos alterar no primeiro login. Dessa forma n\u00e3o temos problema em deixar a senha admin , j\u00e1 que vamos alterar quando entrar na primeira vez no MISP. MISP_ADMIN_PASSPHRASE = admin Caso prefira alterar o valor padr\u00e3o, sem problemas.","title":"MISP_ADMIN_PASSPHRASE"},{"location":"LABS/MISP/install-guide/install-misp-docker/#informacoes-da-base-url","text":"","title":"Informa\u00e7\u00f5es da Base URL"},{"location":"LABS/MISP/install-guide/install-misp-docker/#misp_baseurl","text":"Essa \u00e9 a URL usada pelo MISP, vamos deixar assim devido ao uso de Docker, mas vamos alterar no sistema posteriormente. MISP_BASEURL = localhost","title":"MISP_BASEURL"},{"location":"LABS/MISP/install-guide/install-misp-docker/#informacoes-para-envio-de-email","text":"","title":"Informa\u00e7\u00f5es para Envio de Email"},{"location":"LABS/MISP/install-guide/install-misp-docker/#postfix_relay_host","text":"Responsavel pelo envio de emails, por ser um relay podemos enviar email do gmail por exemplo. POSTFIX_RELAY_HOST = relay.fqdn Posteriormente iremos configurar o envio de email e a cria\u00e7\u00e3o de um servidor usando Docker.","title":"POSTFIX_RELAY_HOST"},{"location":"LABS/MISP/install-guide/install-misp-docker/#informacoes-do-horario-usado-no-misp","text":"","title":"Informa\u00e7\u00f5es do Hor\u00e1rio usado no MISP"},{"location":"LABS/MISP/install-guide/install-misp-docker/#timezone","text":"Timezone usado pelo seu MISP, por padr\u00e3o ele tem o valor: TIMEZONE = Europe/Brussels Vamos alterar para o valor abaixo: TIMEZONE = America/Sao_Paulo Usei como exemplo o site abaixo: - https://www.zeitverschiebung.net/en/timezone/america--sao_paulo","title":"TIMEZONE"},{"location":"LABS/MISP/install-guide/install-misp-docker/#criando-diretorio-para-armazenamento-de-volumes","text":"","title":"Criando diret\u00f3rio para armazenamento de volumes"},{"location":"LABS/MISP/install-guide/install-misp-docker/#data_dir","text":"Local onde ser\u00e1 armazenado os arquivos do MISP, isso acontece devido ao Docker trabalhar de forma isolada e assim caso o container seja reiniciado os dados continuam salvos. Aviso: O uso de volumes \u00e9 muito importante caso queira a persist\u00eancia de dados, como avisei acima, caso n\u00e3o seja feita essa configura\u00e7\u00e3o ser\u00e1 perdido os dados. Irei criar um diret\u00f3rio no meu servidor HOST no local /srv/LABS/MISP : $ mkdir /srv/LABS/MISP","title":"DATA_DIR"},{"location":"LABS/MISP/install-guide/install-misp-docker/#realizando-as-configuracoes-necessarias-env","text":"Irei usar o editor nano para realizar a edi\u00e7\u00e3o do arquivo via linha de comando, veja um exemplo de como ficou meu arquivo de configura\u00e7\u00e3o. MYSQL_HOST = misp_db MYSQL_DATABASE = misp MYSQL_USER = misp MYSQL_PASSWORD = h9BSaYB5pfvnQQPTWsgQFU4oTYwsVp9vVoMv0vy4kCc = MYSQL_ROOT_PASSWORD = 3rbLJJseE+KJE7fkjiJT7qe6dUlaKc63pIHgCE+XeAo = MISP_ADMIN_EMAIL = misp.admin@osintvillage.org MISP_ADMIN_PASSPHRASE = +5r0sYdPAVOXwrxCpdDZrBc6YxvnIjHY6oGkKcMwcy4 = MISP_BASEURL = localhost POSTFIX_RELAY_HOST = relay.fqdn TIMEZONE = America/Sao_Paulo DATA_DIR = /srv/LABS/MISP","title":"Realizando as configura\u00e7\u00f5es necess\u00e1rias - .env"},{"location":"LABS/MISP/install-guide/install-misp-docker/#configuracoes-necessarias-docker-composeyml","text":"Por padr\u00e3o esse \u00e9 o arquivo docker-compose.yml que temos no reposit\u00f3rio do projeto. version: '3' services: web: build: web depends_on: - db container_name: misp_web image: misp:latest restart: unless-stopped ports: - \"80:80\" - \"443:443\" volumes: - ./web/wait-for-it.sh:/usr/local/bin/wait-for-it.sh:ro - /dev/urandom:/dev/random - ${DATA_DIR}/web:/var/www/MISP environment: - MYSQL_HOST=${MYSQL_HOST} - MYSQL_DATABASE=${MYSQL_DATABASE} - MYSQL_USER=${MYSQL_USER} - MYSQL_PASSWORD=${MYSQL_PASSWORD} - MISP_ADMIN_EMAIL=${MISP_ADMIN_EMAIL} - MISP_ADMIN_PASSPHRASE=${MISP_ADMIN_PASSPHRASE} - MISP_BASEURL=${MISP_BASEURL} - POSTFIX_RELAY_HOST=${POSTFIX_RELAY_HOST} - TIMEZONE=${TIMEZONE} entrypoint: \"wait-for-it.sh -t 0 -h db -p 3306 -- /run.sh\" db: container_name: misp_db image: mysql/mysql-server:5.7 restart: unless-stopped volumes: - ${DATA_DIR}/db:/var/lib/mysql environment: - MYSQL_DATABASE=${MYSQL_DATABASE} - MYSQL_USER=${MYSQL_USER} - MYSQL_PASSWORD=${MYSQL_PASSWORD} - MYSQL_ROOT_PASSWORD=${MYSQL_ROOT_PASSWORD} Vamos alterar apenas 2 pontos, que s\u00e3o: ports: - \"80:80\" - \"443:443\" Posteriormente iremos instalar o nginx , por padr\u00e3o ele vai usar essa as portas 80 e 443 . Devido a isso vamos alterar as portas de sa\u00edda do nosso misp e alterar inv\u00e9s de usar a 80 e 443 para 8080 e 4433 . ports: - \"8080:80\" - \"4433:443\"","title":"Configura\u00e7\u00f5es necess\u00e1rias - docker-compose.yml"},{"location":"LABS/MISP/install-guide/install-misp-docker/#build-da-imagem-docker","text":"Depois de realizar as configura\u00e7\u00f5es necess\u00e1rias, vamos realizar o build da imagem e podemos realizar isso da seguinte forma: $ docker-compose build --no-cache Podemos ver as imagens dispon\u00edveis usando o comando: $ docker images","title":"Build da imagem Docker"},{"location":"LABS/MISP/install-guide/install-misp-docker/#subindo-misp","text":"Vamos agora subir nosso ambiente MISP usando o docker-compose e assim ver finalmente nosso MISP online. $ docker-compose up -d Podemos ver quais container est\u00e3o rodando usando o comando: $ docker ps No caso meu IP do servidor \u00e9 o 134.122.126.167 e como n\u00e3o tem regra de firewall por enquanto est\u00e1 acess\u00edvel na porta 8080 e 4433 .","title":"Subindo MISP"},{"location":"LABS/MISP/install-guide/install-misp-docker/#configuracoes-basicas","text":"Por mais que seja alterada as configura\u00e7\u00f5es de email de administrador e senha do administrador, para o primeiro acesso ser\u00e1 usado as credenciais: admin@admin.test admin Vamos adicionar os dados abaixo e escolher uma nova senha segura. admin@admin.test admin","title":"Configura\u00e7\u00f5es b\u00e1sicas"},{"location":"LABS/MISP/install-guide/misp-config-init/","text":"MISP configura\u00e7\u00f5es iniciais \u00b6 Configurando Base URL \u00b6 Base URL \u00e9 a URL do MISP, no nosso caso \u00e9 o dom\u00ednio completo que ser\u00e1 usado. Por exemplo: https://misp.osintvillage.org O erro abaixo acontece por a base URL est\u00e1 ainda configurada por default. Isso acontece devido a instala\u00e7\u00e3o por padr\u00e3o vim como localhost. Vamos ir at\u00e9 o container do MISP e alterar dentro do container. Vamos iniciar listando todos os containers dispon\u00edveis. $ docker ps Em seguida vamos copiar o ID do container do MISP. Nesse caso meu container ID \u00e9 o 96a60b6738dc , mas no seu caso pode ser diferente. $ docker exec -it 96a60b6738dc bash Vamos ir at\u00e9 o diret\u00f3rio. cd app/Config Vamos atualizar o container MISP. Isso \u00e9 necess\u00e1rio para instalar o editor nano. Em seguida vamos instalar o nano usando o comando apt: $ sudo apt install nano -y Em seguida vamos editar o arquivo. Vamos alterar a linha baseurl e adicionar nosso dom\u00ednio. Podemos validar acessando o site e ver se a configura\u00e7\u00e3o foi feita com sucesso. Para sair do MISP \u00e9 s\u00f3 digitar exit no terminal. External base url \u00b6 Vamos alterar a external base URL para que estamos usando no lab. https://misp.osintvillage.org Alterando a linguagem. \u00b6 Vamos alterar a MISP.language . Vamos alterar para usar pt_BR . Agora podemos navegar em nosso MISP em portugues.","title":"7. Configura\u00e7\u00f5es iniciais do MISP"},{"location":"LABS/MISP/install-guide/misp-config-init/#misp-configuracoes-iniciais","text":"","title":"MISP configura\u00e7\u00f5es iniciais"},{"location":"LABS/MISP/install-guide/misp-config-init/#configurando-base-url","text":"Base URL \u00e9 a URL do MISP, no nosso caso \u00e9 o dom\u00ednio completo que ser\u00e1 usado. Por exemplo: https://misp.osintvillage.org O erro abaixo acontece por a base URL est\u00e1 ainda configurada por default. Isso acontece devido a instala\u00e7\u00e3o por padr\u00e3o vim como localhost. Vamos ir at\u00e9 o container do MISP e alterar dentro do container. Vamos iniciar listando todos os containers dispon\u00edveis. $ docker ps Em seguida vamos copiar o ID do container do MISP. Nesse caso meu container ID \u00e9 o 96a60b6738dc , mas no seu caso pode ser diferente. $ docker exec -it 96a60b6738dc bash Vamos ir at\u00e9 o diret\u00f3rio. cd app/Config Vamos atualizar o container MISP. Isso \u00e9 necess\u00e1rio para instalar o editor nano. Em seguida vamos instalar o nano usando o comando apt: $ sudo apt install nano -y Em seguida vamos editar o arquivo. Vamos alterar a linha baseurl e adicionar nosso dom\u00ednio. Podemos validar acessando o site e ver se a configura\u00e7\u00e3o foi feita com sucesso. Para sair do MISP \u00e9 s\u00f3 digitar exit no terminal.","title":"Configurando Base URL"},{"location":"LABS/MISP/install-guide/misp-config-init/#external-base-url","text":"Vamos alterar a external base URL para que estamos usando no lab. https://misp.osintvillage.org","title":"External base url"},{"location":"LABS/MISP/install-guide/misp-config-init/#alterando-a-linguagem","text":"Vamos alterar a MISP.language . Vamos alterar para usar pt_BR . Agora podemos navegar em nosso MISP em portugues.","title":"Alterando a linguagem."},{"location":"LABS/MISP/install-guide/reset-admin-password-cli/","text":"Criando nova senha admin \u00b6 Como estamos trabalhando com o Docker vamos precisar entrar no container. Podemos ver quais container est\u00e3o funcionando. $ docker ps Entrando no container MISP \u00b6 Vamos ver os containers que est\u00e3o em execu\u00e7\u00e3o. Vamos copiar o ID inteiro ou os 4 primeiros caracteres. docker exec -it fefa7a9d349b bash Trocar senha \u00b6 Para realizar a troca da senha vai ser preciso passar o email que deseja trocar e senha que quer adicionar. Podemos resetar a senha realizando o seguinte comando: sudo -u www-data /var/www/MISP/app/Console/cake Password admin@admin.test Password1234 Nesse caso meu email \u00e9 o admin@admin.test e a senha nova \u00e9 a Password1234 . Deu tudo certo com o update de senha. Vamos agora entrar com essa senha temporaria e trocar de senha. Deu tudo certo \u00b6 Agora temos acesso novamente a aplica\u00e7\u00e3o. Referencia: https://www.circl.lu/doc/misp/quick-start/#i-forgot-my-admin-password-","title":"11. Resetando a senha admin via linha de comando"},{"location":"LABS/MISP/install-guide/reset-admin-password-cli/#criando-nova-senha-admin","text":"Como estamos trabalhando com o Docker vamos precisar entrar no container. Podemos ver quais container est\u00e3o funcionando. $ docker ps","title":"Criando nova senha admin"},{"location":"LABS/MISP/install-guide/reset-admin-password-cli/#entrando-no-container-misp","text":"Vamos ver os containers que est\u00e3o em execu\u00e7\u00e3o. Vamos copiar o ID inteiro ou os 4 primeiros caracteres. docker exec -it fefa7a9d349b bash","title":"Entrando no container MISP"},{"location":"LABS/MISP/install-guide/reset-admin-password-cli/#trocar-senha","text":"Para realizar a troca da senha vai ser preciso passar o email que deseja trocar e senha que quer adicionar. Podemos resetar a senha realizando o seguinte comando: sudo -u www-data /var/www/MISP/app/Console/cake Password admin@admin.test Password1234 Nesse caso meu email \u00e9 o admin@admin.test e a senha nova \u00e9 a Password1234 . Deu tudo certo com o update de senha. Vamos agora entrar com essa senha temporaria e trocar de senha.","title":"Trocar senha"},{"location":"LABS/MISP/install-guide/reset-admin-password-cli/#deu-tudo-certo","text":"Agora temos acesso novamente a aplica\u00e7\u00e3o. Referencia: https://www.circl.lu/doc/misp/quick-start/#i-forgot-my-admin-password-","title":"Deu tudo certo"},{"location":"LABS/monitorando-phishings/","text":"Monitorando phishings - Home \u00b6 Nesse laboratorio vamos seguir a ideia de yin yang(bem e mal) com o objetivo de ver como cibercriminosos criam campanhas de phishing e como podemos buscar por elas com algumas tecnicas. Infraestrutura - Montando Lab \u00b6 Instalando Virtualbox \u00b6 Instalando Virtualbox Instalando Genymotion \u00b6 Instalando Genymotion Criando maquina Kali Oficial - Virtualbox \u00b6 Criando maquina Kali Oficial - Virtualbox Criando laboratorio Android - Genymotion \u00b6 Criando laboratorio Android - Genymotion Criando laboratorio Windows - Virtualbox \u00b6 Criando laboratorio Windows - Virtualbox White - Monitoramento \u00b6 Monitorando dom\u00ednios \u00b6 Monitoramento de dominios Buscando informa\u00e7\u00f5es sobre infraestruturas \u00b6 Buscando informa\u00e7\u00f5es sobre infraestruturas Materiais indexados na internet \u00b6 Materiais indexados na internet Redes sociais \u00b6 Buscando paginas suspeitas Comunidades \u00b6 Comunidades Black \u00b6 Cria\u00e7\u00e3o de dom\u00ednios \u00b6 Cria\u00e7\u00e3o de dom\u00ednios Criando paginas \u00b6 Criando paginas Hospedagem \u00b6 Hospedagens Infraestruturas gratuitas \u00b6 Infraestruturas gratuitas Infraestruturas pagas \u00b6 Infraestruturas pagas Configura\u00e7\u00e3o de DNS \u00b6 Configura\u00e7\u00e3o de DNS","title":"1.1. Monitorando phishings - Home"},{"location":"LABS/monitorando-phishings/#monitorando-phishings-home","text":"Nesse laboratorio vamos seguir a ideia de yin yang(bem e mal) com o objetivo de ver como cibercriminosos criam campanhas de phishing e como podemos buscar por elas com algumas tecnicas.","title":"Monitorando phishings - Home"},{"location":"LABS/monitorando-phishings/#infraestrutura-montando-lab","text":"","title":"Infraestrutura - Montando Lab"},{"location":"LABS/monitorando-phishings/#instalando-virtualbox","text":"Instalando Virtualbox","title":"Instalando Virtualbox"},{"location":"LABS/monitorando-phishings/#instalando-genymotion","text":"Instalando Genymotion","title":"Instalando Genymotion"},{"location":"LABS/monitorando-phishings/#criando-maquina-kali-oficial-virtualbox","text":"Criando maquina Kali Oficial - Virtualbox","title":"Criando maquina Kali Oficial - Virtualbox"},{"location":"LABS/monitorando-phishings/#criando-laboratorio-android-genymotion","text":"Criando laboratorio Android - Genymotion","title":"Criando laboratorio Android - Genymotion"},{"location":"LABS/monitorando-phishings/#criando-laboratorio-windows-virtualbox","text":"Criando laboratorio Windows - Virtualbox","title":"Criando laboratorio Windows - Virtualbox"},{"location":"LABS/monitorando-phishings/#white-monitoramento","text":"","title":"White - Monitoramento"},{"location":"LABS/monitorando-phishings/#monitorando-dominios","text":"Monitoramento de dominios","title":"Monitorando dom\u00ednios"},{"location":"LABS/monitorando-phishings/#buscando-informacoes-sobre-infraestruturas","text":"Buscando informa\u00e7\u00f5es sobre infraestruturas","title":"Buscando informa\u00e7\u00f5es sobre infraestruturas"},{"location":"LABS/monitorando-phishings/#materiais-indexados-na-internet","text":"Materiais indexados na internet","title":"Materiais indexados na internet"},{"location":"LABS/monitorando-phishings/#redes-sociais","text":"Buscando paginas suspeitas","title":"Redes sociais"},{"location":"LABS/monitorando-phishings/#comunidades","text":"Comunidades","title":"Comunidades"},{"location":"LABS/monitorando-phishings/#black","text":"","title":"Black"},{"location":"LABS/monitorando-phishings/#criacao-de-dominios","text":"Cria\u00e7\u00e3o de dom\u00ednios","title":"Cria\u00e7\u00e3o de dom\u00ednios"},{"location":"LABS/monitorando-phishings/#criando-paginas","text":"Criando paginas","title":"Criando paginas"},{"location":"LABS/monitorando-phishings/#hospedagem","text":"Hospedagens","title":"Hospedagem"},{"location":"LABS/monitorando-phishings/#infraestruturas-gratuitas","text":"Infraestruturas gratuitas","title":"Infraestruturas gratuitas"},{"location":"LABS/monitorando-phishings/#infraestruturas-pagas","text":"Infraestruturas pagas","title":"Infraestruturas pagas"},{"location":"LABS/monitorando-phishings/#configuracao-de-dns","text":"Configura\u00e7\u00e3o de DNS","title":"Configura\u00e7\u00e3o de DNS"},{"location":"LABS/monitorando-phishings/introducao/","text":"Monitorando phishings - Qual o objetivo desse modulo? \u00b6","title":"1.2. Monitorando phishings - Qual o objetivo desse modulo?"},{"location":"LABS/monitorando-phishings/introducao/#monitorando-phishings-qual-o-objetivo-desse-modulo","text":"","title":"Monitorando phishings - Qual o objetivo desse modulo?"},{"location":"LABS/monitorando-phishings/black/configuracao-dns/","text":"Cloudflare","title":"Configuracao dns"},{"location":"LABS/monitorando-phishings/black/criacao-dominios/","text":"TLDs \u00b6 Homolograf Attack \u00b6 https://github.com/sebob/homographs Typosquatting ou sequestro de URL \u00b6 Dominios \u00b6 Criando dominios \u00b6 Dominios gratuitas \u00b6 Muitos podem n\u00e3o ter dinheiro para come\u00e7ar as opera\u00e7\u00f5es, devido a isso muitos optam por criar dominios gratuitos. Dominio .tk \u00b6 http://www.dot.tk/pt/index.html Dominios pagos \u00b6 Muitos podem n\u00e3o ter dinheiro para come\u00e7ar as opera\u00e7\u00f5es, devido a isso muitos optam por criar dominios gratuitos. Dominios baratos \u00b6 https://registro.br/ https://www.hostinger.com.br/registro-de-dominio https://www.godaddy.com/pt-br/dominios https://superdominios.org/ Solu\u00e7\u00f5es para cria\u00e7\u00e3o de dominios \u00b6 DNSTwist \u00b6 O DNSTwist alem de ser um solu\u00e7\u00e3o incrivel para n\u00f3s que estamos buscando phishings, ele \u00e9 um otimo parceiro para quem est\u00e1 buscando criar sites suspeitos. Podemos encontrar esse projeto no github. https://github.com/elceef/dnstwist/ Caso esteja usando Linux podemos clonar o projeto o compilar usando ele com os seguintes comandos. git clone https://github.com/elceef/dnstwist/ cd dnstwist pip install . Caso esteja usando Docker podemos realizar os seguintes comandos: git clone https://github.com/elceef/dnstwist/ cd dnstwist docker build -t \"greenmind/dnstwist:1\" . docker run -it \"greenmind/dnstwist:1\" \"nome-do-cliente.com.br\" Por padr\u00e3o ele segue 5 qps(Queries por seconds) , pode demorar muito, mas \u00e9 devido o numero de requisi\u00e7\u00f5es por segundo. Dependendo do alvo que est\u00e1 buscando, podemos aumentar o numero de dominios semelhantes. https://azulempresas.cf/home.php URLCrazy \u00b6 O que temos a somar ? \u00b6 Sempre temos algo a somar! Por (A terminar) Criando URL maliciosa \u00b6 No Kali podemos realizar a instala\u00e7\u00e3o usando sudo apt install urlcrazy -y . Outros \u00b6 https://keywordtool.io/pt Sugest\u00f5es de dominios maliciosos \u00b6 https://www.email-format.com/i/search_result/?q=Ache Search for domains containing 'Ache' | Email Format","title":"3.1 Cria\u00e7\u00e3o de dom\u00ednios"},{"location":"LABS/monitorando-phishings/black/criacao-dominios/#tlds","text":"","title":"TLDs"},{"location":"LABS/monitorando-phishings/black/criacao-dominios/#homolograf-attack","text":"https://github.com/sebob/homographs","title":"Homolograf Attack"},{"location":"LABS/monitorando-phishings/black/criacao-dominios/#typosquatting-ou-sequestro-de-url","text":"","title":"Typosquatting ou sequestro de URL"},{"location":"LABS/monitorando-phishings/black/criacao-dominios/#dominios","text":"","title":"Dominios"},{"location":"LABS/monitorando-phishings/black/criacao-dominios/#criando-dominios","text":"","title":"Criando dominios"},{"location":"LABS/monitorando-phishings/black/criacao-dominios/#dominios-gratuitas","text":"Muitos podem n\u00e3o ter dinheiro para come\u00e7ar as opera\u00e7\u00f5es, devido a isso muitos optam por criar dominios gratuitos.","title":"Dominios gratuitas"},{"location":"LABS/monitorando-phishings/black/criacao-dominios/#dominio-tk","text":"http://www.dot.tk/pt/index.html","title":"Dominio .tk"},{"location":"LABS/monitorando-phishings/black/criacao-dominios/#dominios-pagos","text":"Muitos podem n\u00e3o ter dinheiro para come\u00e7ar as opera\u00e7\u00f5es, devido a isso muitos optam por criar dominios gratuitos.","title":"Dominios pagos"},{"location":"LABS/monitorando-phishings/black/criacao-dominios/#dominios-baratos","text":"https://registro.br/ https://www.hostinger.com.br/registro-de-dominio https://www.godaddy.com/pt-br/dominios https://superdominios.org/","title":"Dominios baratos"},{"location":"LABS/monitorando-phishings/black/criacao-dominios/#solucoes-para-criacao-de-dominios","text":"","title":"Solu\u00e7\u00f5es para cria\u00e7\u00e3o de dominios"},{"location":"LABS/monitorando-phishings/black/criacao-dominios/#dnstwist","text":"O DNSTwist alem de ser um solu\u00e7\u00e3o incrivel para n\u00f3s que estamos buscando phishings, ele \u00e9 um otimo parceiro para quem est\u00e1 buscando criar sites suspeitos. Podemos encontrar esse projeto no github. https://github.com/elceef/dnstwist/ Caso esteja usando Linux podemos clonar o projeto o compilar usando ele com os seguintes comandos. git clone https://github.com/elceef/dnstwist/ cd dnstwist pip install . Caso esteja usando Docker podemos realizar os seguintes comandos: git clone https://github.com/elceef/dnstwist/ cd dnstwist docker build -t \"greenmind/dnstwist:1\" . docker run -it \"greenmind/dnstwist:1\" \"nome-do-cliente.com.br\" Por padr\u00e3o ele segue 5 qps(Queries por seconds) , pode demorar muito, mas \u00e9 devido o numero de requisi\u00e7\u00f5es por segundo. Dependendo do alvo que est\u00e1 buscando, podemos aumentar o numero de dominios semelhantes. https://azulempresas.cf/home.php","title":"DNSTwist"},{"location":"LABS/monitorando-phishings/black/criacao-dominios/#urlcrazy","text":"","title":"URLCrazy"},{"location":"LABS/monitorando-phishings/black/criacao-dominios/#o-que-temos-a-somar","text":"Sempre temos algo a somar! Por (A terminar)","title":"O que temos a somar ?"},{"location":"LABS/monitorando-phishings/black/criacao-dominios/#criando-url-maliciosa","text":"No Kali podemos realizar a instala\u00e7\u00e3o usando sudo apt install urlcrazy -y .","title":"Criando URL maliciosa"},{"location":"LABS/monitorando-phishings/black/criacao-dominios/#outros","text":"https://keywordtool.io/pt","title":"Outros"},{"location":"LABS/monitorando-phishings/black/criacao-dominios/#sugestoes-de-dominios-maliciosos","text":"https://www.email-format.com/i/search_result/?q=Ache Search for domains containing 'Ache' | Email Format","title":"Sugest\u00f5es de dominios maliciosos"},{"location":"LABS/monitorando-phishings/black/criando-paginas-suspeitas/","text":"Copiando paginas e criando forms simples Paginas estaticas SocialFish \u00b6 https://github.com/UndeadSec/SocialFish gophish \u00b6 https://getgophish.com/","title":"3.2 Criando paginas"},{"location":"LABS/monitorando-phishings/black/criando-paginas-suspeitas/#socialfish","text":"https://github.com/UndeadSec/SocialFish","title":"SocialFish"},{"location":"LABS/monitorando-phishings/black/criando-paginas-suspeitas/#gophish","text":"https://getgophish.com/","title":"gophish"},{"location":"LABS/monitorando-phishings/black/hospedagens/","text":"Hospedagens Gratuitas \u00b6 Hostinger \u00b6 https://www.hostinger.com.br/hospedagem-gratis Hospedagens Pagas \u00b6 Digital Ocean \u00b6 Realiza\u00e7\u00e3o de mudan\u00e7a de IPS \u00b6 AWS \u00b6 Realiza\u00e7\u00e3o de mudan\u00e7a de IPS \u00b6","title":"Hospedagens"},{"location":"LABS/monitorando-phishings/black/hospedagens/#hospedagens-gratuitas","text":"","title":"Hospedagens Gratuitas"},{"location":"LABS/monitorando-phishings/black/hospedagens/#hostinger","text":"https://www.hostinger.com.br/hospedagem-gratis","title":"Hostinger"},{"location":"LABS/monitorando-phishings/black/hospedagens/#hospedagens-pagas","text":"","title":"Hospedagens Pagas"},{"location":"LABS/monitorando-phishings/black/hospedagens/#digital-ocean","text":"","title":"Digital Ocean"},{"location":"LABS/monitorando-phishings/black/hospedagens/#realizacao-de-mudanca-de-ips","text":"","title":"Realiza\u00e7\u00e3o de mudan\u00e7a de IPS"},{"location":"LABS/monitorando-phishings/black/hospedagens/#aws","text":"","title":"AWS"},{"location":"LABS/monitorando-phishings/black/hospedagens/#realizacao-de-mudanca-de-ips_1","text":"","title":"Realiza\u00e7\u00e3o de mudan\u00e7a de IPS"},{"location":"LABS/monitorando-phishings/black/infraestruturas-gratuitas/","text":"github pages \u00b6 https://pages.github.com/ - Google Cloud O github \u00e9 otimo para hospedar sites e capturar keys(s\u00f3 dork que voa) , podemos hospedar nossos blogs e sites. Mas nada nos impede de criar nossos phishings com esses servi\u00e7os,","title":"3.4 Infraestruturas gratuitas"},{"location":"LABS/monitorando-phishings/black/infraestruturas-gratuitas/#github-pages","text":"https://pages.github.com/ - Google Cloud O github \u00e9 otimo para hospedar sites e capturar keys(s\u00f3 dork que voa) , podemos hospedar nossos blogs e sites. Mas nada nos impede de criar nossos phishings com esses servi\u00e7os,","title":"github pages"},{"location":"LABS/monitorando-phishings/black/infraestruturas-pagas/","text":"Infraestruturas pagas \u00b6 Digital Ocean AWS Infraestruturas \"leste europeu\"","title":"Infraestruturas pagas"},{"location":"LABS/monitorando-phishings/black/infraestruturas-pagas/#infraestruturas-pagas","text":"Digital Ocean AWS Infraestruturas \"leste europeu\"","title":"Infraestruturas pagas"},{"location":"LABS/monitorando-phishings/infraestrutura/a-importancia-criacao-lab/","text":"A importancia da cria\u00e7\u00e3o de laboratorios \u00b6 Porque devemos criar um lab? \u00b6 Diariamente realizamos analises de phishings, paginas suspeitas e aplicativos. Devido a isso \u00e9 de suma importancia a cria\u00e7\u00e3o de laboratorios, seja para maquinas virtuais Linux com o Kali, Android com o Genymotion e laboratorio windows com maquinas atualizadas. Algumas paginas s\u00f3 est\u00e3o disponiveis para Windows, outras para celular e grande maioria est\u00e1 disponivel para todos os sistemas. Com essa seguran\u00e7a a mais em paginas de phishing, as campanhas s\u00e3o direcionadas apenas para um grupo e assim tendo a possibilidade de adicionar/executar malwares. Corromper evidencias \u00b6 Para uma melhor analise \u00e9 recomendado que sempre use um laboratorio limpo, sem cache e sem estar prejudicado. Sua seguran\u00e7a \u00b6 \u00c9 recomendado usar laboratorios via rede NAT, assim evita que caso a maquina host seja comprometida e sua rede.","title":"A importancia da cria\u00e7\u00e3o lab"},{"location":"LABS/monitorando-phishings/infraestrutura/a-importancia-criacao-lab/#a-importancia-da-criacao-de-laboratorios","text":"","title":"A importancia da cria\u00e7\u00e3o de laboratorios"},{"location":"LABS/monitorando-phishings/infraestrutura/a-importancia-criacao-lab/#porque-devemos-criar-um-lab","text":"Diariamente realizamos analises de phishings, paginas suspeitas e aplicativos. Devido a isso \u00e9 de suma importancia a cria\u00e7\u00e3o de laboratorios, seja para maquinas virtuais Linux com o Kali, Android com o Genymotion e laboratorio windows com maquinas atualizadas. Algumas paginas s\u00f3 est\u00e3o disponiveis para Windows, outras para celular e grande maioria est\u00e1 disponivel para todos os sistemas. Com essa seguran\u00e7a a mais em paginas de phishing, as campanhas s\u00e3o direcionadas apenas para um grupo e assim tendo a possibilidade de adicionar/executar malwares.","title":"Porque devemos criar um lab?"},{"location":"LABS/monitorando-phishings/infraestrutura/a-importancia-criacao-lab/#corromper-evidencias","text":"Para uma melhor analise \u00e9 recomendado que sempre use um laboratorio limpo, sem cache e sem estar prejudicado.","title":"Corromper evidencias"},{"location":"LABS/monitorando-phishings/infraestrutura/a-importancia-criacao-lab/#sua-seguranca","text":"\u00c9 recomendado usar laboratorios via rede NAT, assim evita que caso a maquina host seja comprometida e sua rede.","title":"Sua seguran\u00e7a"},{"location":"LABS/monitorando-phishings/infraestrutura/criando-lab-kali-oficial-virtualbox/","text":"Criando Lab Linux - Kali \u00b6 O que \u00e9 o Kali Linux \u00b6 O Kali Linux que antigamente era conhecido como BackTrack Linux \u00e9 uma distribui\u00e7\u00e3o Linux que \u00e9 baseada em Debian e tem o c\u00f3digo aberto voltada para testes de penetra\u00e7\u00e3o avan\u00e7ados e auditoria de seguran\u00e7a. O Kali Linux cont\u00e9m diversas de ferramentas voltadas para diversas tarefas de seguran\u00e7a da informa\u00e7\u00e3o, como pentests, computa\u00e7\u00e3o forense e engenharia reversa. Kali Linux foi lan\u00e7ado em 13 de mar\u00e7o de 2013 como uma reconstru\u00e7\u00e3o completa de cima para baixo do BackTrack Linux, aderindo completamente aos padr\u00f5es de desenvolvimento do Debian. https://www.kali.org/docs/introduction/what-is-kali-linux/ Site oficial \u00b6 Download \u00b6 https://www.kali.org/get-kali/#kali-virtual-machines Como estamos realizando o uso do Virtualbox, vamos realizar o dowload da maquina virtual para o Virtualbox. Podemos usar o link abaixo para realizar o download: https://kali.download/virtual-images/kali-2021.3/kali-linux-2021.3-virtualbox-amd64.ova DICA: Recomendo uGet para gerenciar o download e assim ser mais rapido o download da imagem. Vamos checar ve se a imagem est\u00e1 tudo ok e confirmar que a imagem n\u00e3o est\u00e1 corrompida ou foi modificada. SHA256sum 1956ab337923095d4213ade006938ac58e3d67b209b9647410e8d85e6eaac409 Verificando ISO \u00b6 Vimos Anteriormente que tinhamos uma SHA256sum ao realizar download do kali, agora vamos checar a ISO. sha256sum kali-linux-2021.3-virtualbox-amd64.ova Importando maquina \u00b6 Vamos agora importar nossa maquina para o nosso Virtualbox. Vamos abrir o virtualbox. Vamos clicar em Importar para realizar a importa\u00e7\u00e3o da maquina. Em seguida vamos clicar em Proximo . Agora podemos ver informa\u00e7\u00f5es da nossa maquina como memoria utilizada, CPU, placa de rede usada e etc. Vamos finalizar clicar em Importar . Vamos aceitar termos e condi\u00e7\u00f5es do Kali. Concordo (A) Configurando \u00b6 Configurando - Rede \u00b6 Podemos configurar nossa rede de forma simples, basta clicarmos em configura\u00e7\u00f5es e em seguida em rede . Em seguida s\u00f3 precisamos clicar em OK . Alterando usuario \u00b6 Por padr\u00e3o a maquina vem com o usuario e senha: kali kali Recomendo alterar usando passwd O mesmo para o usuario root . sudo su passwd DICA: N\u00e3o esque\u00e7a a senha","title":"Criando maquina Kali Oficial - Virtualbox"},{"location":"LABS/monitorando-phishings/infraestrutura/criando-lab-kali-oficial-virtualbox/#criando-lab-linux-kali","text":"","title":"Criando Lab Linux - Kali"},{"location":"LABS/monitorando-phishings/infraestrutura/criando-lab-kali-oficial-virtualbox/#o-que-e-o-kali-linux","text":"O Kali Linux que antigamente era conhecido como BackTrack Linux \u00e9 uma distribui\u00e7\u00e3o Linux que \u00e9 baseada em Debian e tem o c\u00f3digo aberto voltada para testes de penetra\u00e7\u00e3o avan\u00e7ados e auditoria de seguran\u00e7a. O Kali Linux cont\u00e9m diversas de ferramentas voltadas para diversas tarefas de seguran\u00e7a da informa\u00e7\u00e3o, como pentests, computa\u00e7\u00e3o forense e engenharia reversa. Kali Linux foi lan\u00e7ado em 13 de mar\u00e7o de 2013 como uma reconstru\u00e7\u00e3o completa de cima para baixo do BackTrack Linux, aderindo completamente aos padr\u00f5es de desenvolvimento do Debian. https://www.kali.org/docs/introduction/what-is-kali-linux/","title":"O que \u00e9 o Kali Linux"},{"location":"LABS/monitorando-phishings/infraestrutura/criando-lab-kali-oficial-virtualbox/#site-oficial","text":"","title":"Site oficial"},{"location":"LABS/monitorando-phishings/infraestrutura/criando-lab-kali-oficial-virtualbox/#download","text":"https://www.kali.org/get-kali/#kali-virtual-machines Como estamos realizando o uso do Virtualbox, vamos realizar o dowload da maquina virtual para o Virtualbox. Podemos usar o link abaixo para realizar o download: https://kali.download/virtual-images/kali-2021.3/kali-linux-2021.3-virtualbox-amd64.ova DICA: Recomendo uGet para gerenciar o download e assim ser mais rapido o download da imagem. Vamos checar ve se a imagem est\u00e1 tudo ok e confirmar que a imagem n\u00e3o est\u00e1 corrompida ou foi modificada. SHA256sum 1956ab337923095d4213ade006938ac58e3d67b209b9647410e8d85e6eaac409","title":"Download"},{"location":"LABS/monitorando-phishings/infraestrutura/criando-lab-kali-oficial-virtualbox/#verificando-iso","text":"Vimos Anteriormente que tinhamos uma SHA256sum ao realizar download do kali, agora vamos checar a ISO. sha256sum kali-linux-2021.3-virtualbox-amd64.ova","title":"Verificando ISO"},{"location":"LABS/monitorando-phishings/infraestrutura/criando-lab-kali-oficial-virtualbox/#importando-maquina","text":"Vamos agora importar nossa maquina para o nosso Virtualbox. Vamos abrir o virtualbox. Vamos clicar em Importar para realizar a importa\u00e7\u00e3o da maquina. Em seguida vamos clicar em Proximo . Agora podemos ver informa\u00e7\u00f5es da nossa maquina como memoria utilizada, CPU, placa de rede usada e etc. Vamos finalizar clicar em Importar . Vamos aceitar termos e condi\u00e7\u00f5es do Kali. Concordo (A)","title":"Importando maquina"},{"location":"LABS/monitorando-phishings/infraestrutura/criando-lab-kali-oficial-virtualbox/#configurando","text":"","title":"Configurando"},{"location":"LABS/monitorando-phishings/infraestrutura/criando-lab-kali-oficial-virtualbox/#configurando-rede","text":"Podemos configurar nossa rede de forma simples, basta clicarmos em configura\u00e7\u00f5es e em seguida em rede . Em seguida s\u00f3 precisamos clicar em OK .","title":"Configurando - Rede"},{"location":"LABS/monitorando-phishings/infraestrutura/criando-lab-kali-oficial-virtualbox/#alterando-usuario","text":"Por padr\u00e3o a maquina vem com o usuario e senha: kali kali Recomendo alterar usando passwd O mesmo para o usuario root . sudo su passwd DICA: N\u00e3o esque\u00e7a a senha","title":"Alterando usuario"},{"location":"LABS/monitorando-phishings/infraestrutura/criando-lab-windows-virtualbox/","text":"Criando conta \u00b6 Agora iniciar realizando o download do Windows 10. https://www.microsoft.com/pt-br/p/try-windows-10/9nblggh6280n?activetab=pivot:overviewtab Vamos criar uma conta. https://10minutemail.com/ Realizando download \u00b6 Podemos realizar o download do Windows no link abaixo. https://www.microsoft.com/pt-br/software-download/windows10ISO Aqui vamos selecionar qual edi\u00e7\u00e3o do sistema vamos usar. Agora sera configurado o idioma. Deseja instalar 64bits ou 32bits. Recomendo usar algum gerenciador de download, por exemplo o uget. Instalando o Windows 10 \u00b6 Criando uma nova maquina \u00b6 Configurando memoria para o sistema. Pode ser que seja necessario adicionar mais memoria. Aqui vamos selecionar um novo disco rigido. Tipo de disco rigido. Vamos selecionar o disco dinamicamente alocado. Tamanho do disco(HD). Configurando ISO \u00b6 Vamos adicionar o disco que realizamos download. Vamos clicar no icone do disco para adicionar um novo disco. Vamos finalizar clicando em Ok . Iniciando instala\u00e7\u00e3o \u00b6 Vamos selecionar o idioma. Agora Instalar agora . nao tenho chave do produto. Vamos selecionar a op\u00e7\u00e3o Nao tenho a chave do produto . Aqui qual o tipo que vamos usar: Home Home Single Language Education Pro Pro Education Pro for Workstation Aceite os termos. Vamos avan\u00e7ar . Avan\u00e7ar Carregando a instala\u00e7\u00e3o. O Windows pode reiniciar algumas vezes. Configure a sua regi\u00e3o. Configure o teclado. Caso seja necessario configure outro teclado. Pular Use o email da conta criada anteriormente. Configure um PIN(Senha de acesso). Selecione incluir letras e simbolos . N\u00e3o \u00e9 necessario o compartilhamento da localiza\u00e7\u00e3o. Aceitar N\u00e3o \u00e9 necessario localizar o dispositivo. Aceitar N\u00e3o \u00e9 necessario enviar dados para a microsoft. Aceitar N\u00e3o \u00e9 necessario a escrita aprimorar a escrita a tinta. Aceitar N\u00e3o \u00e9 necessario experiencias personalizadas. Aceitar N\u00e3o \u00e9 necessario permitir que os app usem a ID de anuncio. Aceitar Podemos ignorar. Ignorar N\u00e3o \u00e9 necessario configurar o seu celular android. N\u00e3o obrigado Caso queira pode configurar backup, mas sempre inicio uma maquina limpa e clico na configura\u00e7\u00e3o Salvar somente arquivos neste compputador . Salvar somente neste computador Pode recusar o uso do office 365. Recusar Pode ignorar a melhoria do cortana. Agora n\u00e3o Finalizando as configura\u00e7\u00f5es. Nossa maquina est\u00e1 pronta.","title":"Criando laboratorio Windows - Virtualbox"},{"location":"LABS/monitorando-phishings/infraestrutura/criando-lab-windows-virtualbox/#criando-conta","text":"Agora iniciar realizando o download do Windows 10. https://www.microsoft.com/pt-br/p/try-windows-10/9nblggh6280n?activetab=pivot:overviewtab Vamos criar uma conta. https://10minutemail.com/","title":"Criando conta"},{"location":"LABS/monitorando-phishings/infraestrutura/criando-lab-windows-virtualbox/#realizando-download","text":"Podemos realizar o download do Windows no link abaixo. https://www.microsoft.com/pt-br/software-download/windows10ISO Aqui vamos selecionar qual edi\u00e7\u00e3o do sistema vamos usar. Agora sera configurado o idioma. Deseja instalar 64bits ou 32bits. Recomendo usar algum gerenciador de download, por exemplo o uget.","title":"Realizando download"},{"location":"LABS/monitorando-phishings/infraestrutura/criando-lab-windows-virtualbox/#instalando-o-windows-10","text":"","title":"Instalando o Windows 10"},{"location":"LABS/monitorando-phishings/infraestrutura/criando-lab-windows-virtualbox/#criando-uma-nova-maquina","text":"Configurando memoria para o sistema. Pode ser que seja necessario adicionar mais memoria. Aqui vamos selecionar um novo disco rigido. Tipo de disco rigido. Vamos selecionar o disco dinamicamente alocado. Tamanho do disco(HD).","title":"Criando uma nova maquina"},{"location":"LABS/monitorando-phishings/infraestrutura/criando-lab-windows-virtualbox/#configurando-iso","text":"Vamos adicionar o disco que realizamos download. Vamos clicar no icone do disco para adicionar um novo disco. Vamos finalizar clicando em Ok .","title":"Configurando ISO"},{"location":"LABS/monitorando-phishings/infraestrutura/criando-lab-windows-virtualbox/#iniciando-instalacao","text":"Vamos selecionar o idioma. Agora Instalar agora . nao tenho chave do produto. Vamos selecionar a op\u00e7\u00e3o Nao tenho a chave do produto . Aqui qual o tipo que vamos usar: Home Home Single Language Education Pro Pro Education Pro for Workstation Aceite os termos. Vamos avan\u00e7ar . Avan\u00e7ar Carregando a instala\u00e7\u00e3o. O Windows pode reiniciar algumas vezes. Configure a sua regi\u00e3o. Configure o teclado. Caso seja necessario configure outro teclado. Pular Use o email da conta criada anteriormente. Configure um PIN(Senha de acesso). Selecione incluir letras e simbolos . N\u00e3o \u00e9 necessario o compartilhamento da localiza\u00e7\u00e3o. Aceitar N\u00e3o \u00e9 necessario localizar o dispositivo. Aceitar N\u00e3o \u00e9 necessario enviar dados para a microsoft. Aceitar N\u00e3o \u00e9 necessario a escrita aprimorar a escrita a tinta. Aceitar N\u00e3o \u00e9 necessario experiencias personalizadas. Aceitar N\u00e3o \u00e9 necessario permitir que os app usem a ID de anuncio. Aceitar Podemos ignorar. Ignorar N\u00e3o \u00e9 necessario configurar o seu celular android. N\u00e3o obrigado Caso queira pode configurar backup, mas sempre inicio uma maquina limpa e clico na configura\u00e7\u00e3o Salvar somente arquivos neste compputador . Salvar somente neste computador Pode recusar o uso do office 365. Recusar Pode ignorar a melhoria do cortana. Agora n\u00e3o Finalizando as configura\u00e7\u00f5es. Nossa maquina est\u00e1 pronta.","title":"Iniciando instala\u00e7\u00e3o"},{"location":"LABS/monitorando-phishings/infraestrutura/instalando-genymotion-linux/","text":"Genymotion \u00b6 O que \u00e9 o Genymotion ? \u00b6 O Genymotion \u00e9 um projeto que tem como objetivo a emula\u00e7\u00e3o gratuita de sistemas operacionais Android. Como ele podemos usar diversas vers\u00f5es, os respectivos aplicativos disponiveis e usar de forma virtualizada sem a necessacidade de ter diversos dispositivos fisicos. O que podemos fazer ? \u00b6 Com o Genymotion podemos realizar diversas a\u00e7\u00f5es, por exemplo: - Emular um dispositivo Android; - Obter root no dispositivo; - Realizar download do APK. Neste laboratorio iremos: - Criar o dispositivo Android para o laboratorio; Instala\u00e7\u00e3o \u00b6 O Genymotion tem como pr\u00e9-requisito a instala\u00e7\u00e3o do VirtualBox, dependendo da vers\u00e3o for realizado o download o mesmo j\u00e1 no instalador. Criando conta \u00b6 Cria\u00e7\u00e3o de Conta: https://www-v1.genymotion.com/account/create/ Vou usar um email temporario https://10minutemail.com/ Realizando download \u00b6 Download: https://genymotion.com/download Documenta\u00e7\u00e3o \u00b6 Documenta\u00e7\u00e3o https://docs.genymotion.com/desktop/latest/ Chegou o email. Nesse caso meu email \u00e9 o gqvfauvcxsmlrvtdtu@pp7rvv.com . Agora vamos escolher qual vers\u00e3o usar, vou usar gratuita por 30 dias e que tem o nome de TRY FOR 30 DAYS . Observa\u00e7\u00f5es \u00b6 Podemos usar online e pagamos por hora Android e IOS. IOS s\u00f3 na nuvem \u00c9 recomendado o uso de um dispositivo fisico devido a estabilidade, velocidade e minimizar possiveis problemas. Comandos para instala\u00e7\u00e3o \u00b6 Para instalar: cd /tmp wget -c https://dl.genymotion.com/releases/genymotion-3.2.1/genymotion-3.2.1-linux_x64.bin chmod +x genymotion-3.2.1-linux_x64.bin sudo ./genymotion-3.2.1-linux_x64.bin Vamos criar um script com as informa\u00e7\u00f5es acima e dar o nome de install_genymotion.sh . Vamos dar permiss\u00e3o de execu\u00e7\u00e3o usando chmod . chmod +x install_genymotion.sh Podemos ver o resultado. Vamos realizar o login na conta. Caso n\u00e3o tenha feito conta pode ir at\u00e9 CREATE ACCOUNT . Vamos ser redirecionados. https://www-v1.genymotion.com/account/create/ Vamos setar personal Use . Vamos aceitar a licen\u00e7a. Essa \u00e9 a pagina principal. Vamos clicar no + , vamos setar o valor Samsung Galaxy s9 . Vamos selecionar o Samsung Galaxy da sua escolha, em seguida vamos clicar em Next . Agora vamos dar um nome para esse ambiente e clicar em Install . Download est\u00e1 sendo realizado. Ap\u00f3s ser\u00e1 realizado a cria\u00e7\u00e3o do laboratorio. DICA \u00c9 recomendado que seja alterado para o local. /opt/genymobile/genymotion/tools Iniciando maquina podemos clicar com o bot\u00e3o direito em cima da maquina e clicar em start para iniciar. Por padr\u00e3o a maquina Caso tenha algum problema ou ja tenha usado a maquina clique Reset Factory . A maquina vem com a configura\u00e7\u00e3o de rede NAT por padr\u00e3o. Podemos ver que nossa maquina com Android foi criada.","title":"Criando laboratorio Android - Genymotion"},{"location":"LABS/monitorando-phishings/infraestrutura/instalando-genymotion-linux/#genymotion","text":"","title":"Genymotion"},{"location":"LABS/monitorando-phishings/infraestrutura/instalando-genymotion-linux/#o-que-e-o-genymotion","text":"O Genymotion \u00e9 um projeto que tem como objetivo a emula\u00e7\u00e3o gratuita de sistemas operacionais Android. Como ele podemos usar diversas vers\u00f5es, os respectivos aplicativos disponiveis e usar de forma virtualizada sem a necessacidade de ter diversos dispositivos fisicos.","title":"O que \u00e9 o Genymotion ?"},{"location":"LABS/monitorando-phishings/infraestrutura/instalando-genymotion-linux/#o-que-podemos-fazer","text":"Com o Genymotion podemos realizar diversas a\u00e7\u00f5es, por exemplo: - Emular um dispositivo Android; - Obter root no dispositivo; - Realizar download do APK. Neste laboratorio iremos: - Criar o dispositivo Android para o laboratorio;","title":"O que podemos fazer ?"},{"location":"LABS/monitorando-phishings/infraestrutura/instalando-genymotion-linux/#instalacao","text":"O Genymotion tem como pr\u00e9-requisito a instala\u00e7\u00e3o do VirtualBox, dependendo da vers\u00e3o for realizado o download o mesmo j\u00e1 no instalador.","title":"Instala\u00e7\u00e3o"},{"location":"LABS/monitorando-phishings/infraestrutura/instalando-genymotion-linux/#criando-conta","text":"Cria\u00e7\u00e3o de Conta: https://www-v1.genymotion.com/account/create/ Vou usar um email temporario https://10minutemail.com/","title":"Criando conta"},{"location":"LABS/monitorando-phishings/infraestrutura/instalando-genymotion-linux/#realizando-download","text":"Download: https://genymotion.com/download","title":"Realizando download"},{"location":"LABS/monitorando-phishings/infraestrutura/instalando-genymotion-linux/#documentacao","text":"Documenta\u00e7\u00e3o https://docs.genymotion.com/desktop/latest/ Chegou o email. Nesse caso meu email \u00e9 o gqvfauvcxsmlrvtdtu@pp7rvv.com . Agora vamos escolher qual vers\u00e3o usar, vou usar gratuita por 30 dias e que tem o nome de TRY FOR 30 DAYS .","title":"Documenta\u00e7\u00e3o"},{"location":"LABS/monitorando-phishings/infraestrutura/instalando-genymotion-linux/#observacoes","text":"Podemos usar online e pagamos por hora Android e IOS. IOS s\u00f3 na nuvem \u00c9 recomendado o uso de um dispositivo fisico devido a estabilidade, velocidade e minimizar possiveis problemas.","title":"Observa\u00e7\u00f5es"},{"location":"LABS/monitorando-phishings/infraestrutura/instalando-genymotion-linux/#comandos-para-instalacao","text":"Para instalar: cd /tmp wget -c https://dl.genymotion.com/releases/genymotion-3.2.1/genymotion-3.2.1-linux_x64.bin chmod +x genymotion-3.2.1-linux_x64.bin sudo ./genymotion-3.2.1-linux_x64.bin Vamos criar um script com as informa\u00e7\u00f5es acima e dar o nome de install_genymotion.sh . Vamos dar permiss\u00e3o de execu\u00e7\u00e3o usando chmod . chmod +x install_genymotion.sh Podemos ver o resultado. Vamos realizar o login na conta. Caso n\u00e3o tenha feito conta pode ir at\u00e9 CREATE ACCOUNT . Vamos ser redirecionados. https://www-v1.genymotion.com/account/create/ Vamos setar personal Use . Vamos aceitar a licen\u00e7a. Essa \u00e9 a pagina principal. Vamos clicar no + , vamos setar o valor Samsung Galaxy s9 . Vamos selecionar o Samsung Galaxy da sua escolha, em seguida vamos clicar em Next . Agora vamos dar um nome para esse ambiente e clicar em Install . Download est\u00e1 sendo realizado. Ap\u00f3s ser\u00e1 realizado a cria\u00e7\u00e3o do laboratorio. DICA \u00c9 recomendado que seja alterado para o local. /opt/genymobile/genymotion/tools Iniciando maquina podemos clicar com o bot\u00e3o direito em cima da maquina e clicar em start para iniciar. Por padr\u00e3o a maquina Caso tenha algum problema ou ja tenha usado a maquina clique Reset Factory . A maquina vem com a configura\u00e7\u00e3o de rede NAT por padr\u00e3o. Podemos ver que nossa maquina com Android foi criada.","title":"Comandos para instala\u00e7\u00e3o"},{"location":"LABS/monitorando-phishings/infraestrutura/instalando-virtualbox-linux/","text":"Instalando Virtualbox Linux \u00b6 Eu gosto muito do Debian, diferente de outros sistemas operacionais como o Ubuntu, o Debian vem com poucos softwares instalados e sem softwares proprietarios inclusos. Alem disso tem uma grande comunidade por tras e com diversos projetos que d\u00e3o suporte para quem est\u00e1 iniciando. Por exemplo: - https://servidordebian.org/pt/start Aten\u00e7\u00e3o: Fique a vontade para usar o Linux que se sentir mais a vontade, mas n\u00e3o esque\u00e7a de saber o nome e a vers\u00e3o usada. O que \u00e9 o Virtualbox \u00b6 O Virtualbox \u00e9 um \u00f3timo produto para nos auxiliar na virtualiza\u00e7\u00e3o e \u00e9 dispon\u00edvel para X86 e AMD64/Intel64. Podemos usar ele em uso domestico ou corporativo. Al\u00e9m de ser um \u00f3timo produto, ele tamb\u00e9m \u00e9 a \u00fanica solu\u00e7\u00e3o profissional dispon\u00edvel gratuitamente como Software Open Source sob os termos GNU(General Public Licence) Vers\u00e3o 2. Dispon\u00edvel em varios hosts \u00b6 Podemos usar o Virtualbox em diversos hosts, sejam eles: - Windows - Linux - Macintosh - Solaris Al\u00e9m de suportar lista gigante de sistemas operacionais convidados, veja um pouco Windows \u00b6 NT 4.0 2000 XP Server 2003 Vista Windows 7 Windows 8 Windows 10 DOS Windows 3.x Linux \u00b6 Debian Ubuntu Mint CentOS Arch Linux 2.4 2.6 3.x 4.x Outras op\u00e7\u00f5es \u00b6 Solaris OpenSolaris OpenBSD Comunidade e Oracle \u00b6 Al\u00e9m de novas vers\u00f5es ele sempre tem novas funcionalidades, novos recursos, novos sistemas operacionais convidados e plataformas onde ele \u00e9 executado. Atualmente o Virtualbox disponibiliza novas vers\u00f5es com uma certa frequ\u00eancia, tudo isso gra\u00e7as a sua comunidade que \u00e9 incentivada a contribuir, j\u00e1 a Oracle \u00e9 a empresa respons\u00e1vel por tr\u00e1s do Virtualbox e ajuda a manter sempre os crit\u00e9rios de qualidade. Instalando Virtualbox - DPKG \u00b6 Site oficial: https://www.virtualbox.org/ Link download: https://www.virtualbox.org/wiki/Downloads Antes de come\u00e7ar \u00b6 Nos exemplos eu vou usar o sistema operacional Debian. Para acompanhar voc\u00ea precisa estar usando um sistema baseado no Debian Obtendo o Virtualbox \u00b6 Vamos para o link. https://www.virtualbox.org/wiki/Linux_Downloads Nesse caso vou usar o Debian bullseye 64 Bits. http://download.virtualbox.org/virtualbox/6.1.28/virtualbox-6.1_6.1.28-147628~Debian~buster_amd64.deb Buscando por outras vers\u00f5es \u00b6 Caso queira usar uma outra vers\u00e3o antiga podemos usar tamb\u00e9m o seguinte link https://download.virtualbox.org/virtualbox/ Iniciando a instala\u00e7\u00e3o \u00b6 Nesse exemplo estou no diret\u00f3rio /home/greenmind/Downloads Para instalar preciso fazer sudo dpkg -i virtualbox-6.1_6.1.28-147628~Debian~bullseye_amd64.deb Ap\u00f3s isso o Virtualbox vai estar instalado Menu de aplicativos -> Sistema -> Oracle VM VirtualBox Instalando extension pack \u00b6 Podemos realizar o download do extension pack no link abaixo. https://www.virtualbox.org/wiki/Downloads A vers\u00e3o atual \u00e9 a 6.1.28 . https://download.virtualbox.org/virtualbox/6.1.28/Oracle_VM_VirtualBox_Extension_Pack-6.1.28.vbox-extpack N\u00e3o esque\u00e7a de usar o extension pack na mesma vers\u00e3o do virtualbox. ./Oracle_VM_VirtualBox_Extension_Pack-6.1.28.vbox-extpack Referencias \u00b6 Linux Donwload Old Builds Oracle VirtualBox - 28-08-2018-15:07","title":"Instalando Virtualbox - Linux"},{"location":"LABS/monitorando-phishings/infraestrutura/instalando-virtualbox-linux/#instalando-virtualbox-linux","text":"Eu gosto muito do Debian, diferente de outros sistemas operacionais como o Ubuntu, o Debian vem com poucos softwares instalados e sem softwares proprietarios inclusos. Alem disso tem uma grande comunidade por tras e com diversos projetos que d\u00e3o suporte para quem est\u00e1 iniciando. Por exemplo: - https://servidordebian.org/pt/start Aten\u00e7\u00e3o: Fique a vontade para usar o Linux que se sentir mais a vontade, mas n\u00e3o esque\u00e7a de saber o nome e a vers\u00e3o usada.","title":"Instalando Virtualbox Linux"},{"location":"LABS/monitorando-phishings/infraestrutura/instalando-virtualbox-linux/#o-que-e-o-virtualbox","text":"O Virtualbox \u00e9 um \u00f3timo produto para nos auxiliar na virtualiza\u00e7\u00e3o e \u00e9 dispon\u00edvel para X86 e AMD64/Intel64. Podemos usar ele em uso domestico ou corporativo. Al\u00e9m de ser um \u00f3timo produto, ele tamb\u00e9m \u00e9 a \u00fanica solu\u00e7\u00e3o profissional dispon\u00edvel gratuitamente como Software Open Source sob os termos GNU(General Public Licence) Vers\u00e3o 2.","title":"O que \u00e9 o Virtualbox"},{"location":"LABS/monitorando-phishings/infraestrutura/instalando-virtualbox-linux/#disponivel-em-varios-hosts","text":"Podemos usar o Virtualbox em diversos hosts, sejam eles: - Windows - Linux - Macintosh - Solaris Al\u00e9m de suportar lista gigante de sistemas operacionais convidados, veja um pouco","title":"Dispon\u00edvel em varios hosts"},{"location":"LABS/monitorando-phishings/infraestrutura/instalando-virtualbox-linux/#windows","text":"NT 4.0 2000 XP Server 2003 Vista Windows 7 Windows 8 Windows 10 DOS Windows 3.x","title":"Windows"},{"location":"LABS/monitorando-phishings/infraestrutura/instalando-virtualbox-linux/#linux","text":"Debian Ubuntu Mint CentOS Arch Linux 2.4 2.6 3.x 4.x","title":"Linux"},{"location":"LABS/monitorando-phishings/infraestrutura/instalando-virtualbox-linux/#outras-opcoes","text":"Solaris OpenSolaris OpenBSD","title":"Outras op\u00e7\u00f5es"},{"location":"LABS/monitorando-phishings/infraestrutura/instalando-virtualbox-linux/#comunidade-e-oracle","text":"Al\u00e9m de novas vers\u00f5es ele sempre tem novas funcionalidades, novos recursos, novos sistemas operacionais convidados e plataformas onde ele \u00e9 executado. Atualmente o Virtualbox disponibiliza novas vers\u00f5es com uma certa frequ\u00eancia, tudo isso gra\u00e7as a sua comunidade que \u00e9 incentivada a contribuir, j\u00e1 a Oracle \u00e9 a empresa respons\u00e1vel por tr\u00e1s do Virtualbox e ajuda a manter sempre os crit\u00e9rios de qualidade.","title":"Comunidade e Oracle"},{"location":"LABS/monitorando-phishings/infraestrutura/instalando-virtualbox-linux/#instalando-virtualbox-dpkg","text":"Site oficial: https://www.virtualbox.org/ Link download: https://www.virtualbox.org/wiki/Downloads","title":"Instalando Virtualbox - DPKG"},{"location":"LABS/monitorando-phishings/infraestrutura/instalando-virtualbox-linux/#antes-de-comecar","text":"Nos exemplos eu vou usar o sistema operacional Debian. Para acompanhar voc\u00ea precisa estar usando um sistema baseado no Debian","title":"Antes de come\u00e7ar"},{"location":"LABS/monitorando-phishings/infraestrutura/instalando-virtualbox-linux/#obtendo-o-virtualbox","text":"Vamos para o link. https://www.virtualbox.org/wiki/Linux_Downloads Nesse caso vou usar o Debian bullseye 64 Bits. http://download.virtualbox.org/virtualbox/6.1.28/virtualbox-6.1_6.1.28-147628~Debian~buster_amd64.deb","title":"Obtendo o Virtualbox"},{"location":"LABS/monitorando-phishings/infraestrutura/instalando-virtualbox-linux/#buscando-por-outras-versoes","text":"Caso queira usar uma outra vers\u00e3o antiga podemos usar tamb\u00e9m o seguinte link https://download.virtualbox.org/virtualbox/","title":"Buscando por outras vers\u00f5es"},{"location":"LABS/monitorando-phishings/infraestrutura/instalando-virtualbox-linux/#iniciando-a-instalacao","text":"Nesse exemplo estou no diret\u00f3rio /home/greenmind/Downloads Para instalar preciso fazer sudo dpkg -i virtualbox-6.1_6.1.28-147628~Debian~bullseye_amd64.deb Ap\u00f3s isso o Virtualbox vai estar instalado Menu de aplicativos -> Sistema -> Oracle VM VirtualBox","title":"Iniciando a instala\u00e7\u00e3o"},{"location":"LABS/monitorando-phishings/infraestrutura/instalando-virtualbox-linux/#instalando-extension-pack","text":"Podemos realizar o download do extension pack no link abaixo. https://www.virtualbox.org/wiki/Downloads A vers\u00e3o atual \u00e9 a 6.1.28 . https://download.virtualbox.org/virtualbox/6.1.28/Oracle_VM_VirtualBox_Extension_Pack-6.1.28.vbox-extpack N\u00e3o esque\u00e7a de usar o extension pack na mesma vers\u00e3o do virtualbox. ./Oracle_VM_VirtualBox_Extension_Pack-6.1.28.vbox-extpack","title":"Instalando extension pack"},{"location":"LABS/monitorando-phishings/infraestrutura/instalando-virtualbox-linux/#referencias","text":"Linux Donwload Old Builds Oracle VirtualBox - 28-08-2018-15:07","title":"Referencias"},{"location":"LABS/monitorando-phishings/infraestrutura/requisitos-lab/","text":"Requisitos para a cria\u00e7\u00e3o laboratorio \u00b6 Esses requisitos usados para o laboratorio de monitoramento de phishing. Recomenda\u00e7\u00f5es \u00b6 Recomendamos que usem uma maquina Linux com o sistema operacional que voc\u00ea se sente a vontade, eu uso e recomendo o Ubuntu ou Debian. Link do Debian: https://www.debian.org/download Link do Ubuntu: https://ubuntu.com/download/desktop Instalando requisitos laboratorio \u00b6 Kali ser\u00e1 usado para realizar uma analise com as solu\u00e7\u00f5es opensource disponiveis e vamos realizar a importa\u00e7\u00e3o de uma maquina virtual oficial disponivel no site do Kali. Genymotion vai nos auxiliar na analise mobile de paginas suspeitas, j\u00e1 que algumas paginas de phishing s\u00f3 est\u00e3o disponiveis para o Android. O Windows ser\u00e1 usado para analise de phishing com foco nesse sistema operacional.","title":"Requisitos laboratorio"},{"location":"LABS/monitorando-phishings/infraestrutura/requisitos-lab/#requisitos-para-a-criacao-laboratorio","text":"Esses requisitos usados para o laboratorio de monitoramento de phishing.","title":"Requisitos para a cria\u00e7\u00e3o laboratorio"},{"location":"LABS/monitorando-phishings/infraestrutura/requisitos-lab/#recomendacoes","text":"Recomendamos que usem uma maquina Linux com o sistema operacional que voc\u00ea se sente a vontade, eu uso e recomendo o Ubuntu ou Debian. Link do Debian: https://www.debian.org/download Link do Ubuntu: https://ubuntu.com/download/desktop","title":"Recomenda\u00e7\u00f5es"},{"location":"LABS/monitorando-phishings/infraestrutura/requisitos-lab/#instalando-requisitos-laboratorio","text":"Kali ser\u00e1 usado para realizar uma analise com as solu\u00e7\u00f5es opensource disponiveis e vamos realizar a importa\u00e7\u00e3o de uma maquina virtual oficial disponivel no site do Kali. Genymotion vai nos auxiliar na analise mobile de paginas suspeitas, j\u00e1 que algumas paginas de phishing s\u00f3 est\u00e3o disponiveis para o Android. O Windows ser\u00e1 usado para analise de phishing com foco nesse sistema operacional.","title":"Instalando requisitos laboratorio"},{"location":"LABS/monitorando-phishings/white/DGA/","text":"Domain generation algorithm \u00b6 https://bluecatnetworks.com/blog/among-cyber-attack-techniques-what-is-a-dga/","title":"Domain generation algorithm"},{"location":"LABS/monitorando-phishings/white/DGA/#domain-generation-algorithm","text":"https://bluecatnetworks.com/blog/among-cyber-attack-techniques-what-is-a-dga/","title":"Domain generation algorithm"},{"location":"LABS/monitorando-phishings/white/buscando-informacoes-sobre-infraestruturas/","text":"Buscando informa\u00e7\u00f5es sobre infraestruturas \u00b6 Validando informa\u00e7\u00f5es sobre um dominio suspeito \u00b6 Whois \u00b6 Whois o que \u00e9 ? \u00b6 O WHOIS \u00e9 um protocolo da TCP/IP espec\u00edfico para consultar informa\u00e7\u00f5es de contato e DNS sobre entidades na internet. Uma entidade na internet pode ser: Nome de dom\u00ednio; Um endere\u00e7o IP; Sistema aut\u00f4nomo(Autonomous system). Como usar ? \u00b6 Clientes Linux \u00b6 Em alguns sistemas Linux ele ja vem por padr\u00e3o e podemos realizar uma consulta da seguinte forma: whois badbank.com.br Clientes Online \u00b6 Alem de usar um cliente instalado em nossa maquina, podemos usar um projeto na vers\u00e3o online e dessa forma n\u00e3o precisar instalar. SharingmyIP \u00b6 http://sharingmyip.com/ O que \u00e9 o SharingMyIP? \u00b6 O SharingMyIP \u00e9 um projeto online(que podemos automatizar tambem via linha de comando), que nos informa quais dominios usam o mesmo IP, mesmo dominio e at\u00e9 informa\u00e7\u00f5es de DNS. Vamos imaginar que precisamos obter o m\u00e1ximo de informa\u00e7\u00f5es sobre um dom\u00ednio/subdom\u00ednio, como podemos fazer isso sem interagir diretamente com o alvo e sem realizar um consulta ao DNS de nossa maquina? Podemos saber quais sites est\u00e3o compartilhando o mesmo IP usando o SharingMyIP. Alem disso atualmente muitas empresas usam hosts compartilhados, seja para economizar, simplicidade e tambem infraestruturas comprometidas. Desenvolvendo ferramenta usando Python \u00b6 Podemos criar um script r\u00e1pido para nos ajudar nos testes , veja o exemplo: import requests from bs4 import BeautifulSoup url = \"https://globo.com\" ip = \"10.10.10.10\" rec_site = requests . get ( 'http://sharingmyip.com/?site=' + url ) #print(rec_site.text) soup = BeautifulSoup ( rec_site . text , 'html.parser' ) #print(\"Sites para o IP:\\n\"+soup.textarea.string) ''' for i in range(len(soup.textarea)): print(soup.textarea.string) ''' qt_textarea = len ( soup ( 'textarea' )) msg_list = [ 'Site (s) neste endere\u00e7o' , 'DNS para ' , 'Entradas de DNS relacionadas para' ] #for msg in range(msg_list): for i in range ( qt_textarea ): if ( i == 0 ): print ( msg_list [ 0 ] + \" \" + ip ) print ( soup ( 'textarea' )[ i ] . string ) elif i == 1 : print ( msg_list [ 1 ] + \" \" + url ) print ( soup ( 'textarea' )[ i ] . string ) elif i == 2 : print ( msg_list [ 2 ] + \" \" + url ) print ( soup ( 'textarea' )[ i ] . string ) else : print ( \"Aconteceu algo errado :D\" ) Temos agora o mesmo resultado que o site , a diferen\u00e7a que temos essa informa\u00e7\u00e3o com um script em python e que n\u00f3s desenvolvemos. DNSdumpster \u00b6 https://dnsdumpster.com/ O que \u00e9 DNSDumpster? \u00b6 DNSDumpster nos ajuda a buscar informa\u00e7\u00f5es com uso de OSINT, ele nos ajuda no: Reconhecimento; Pesquisa; Localiza\u00e7\u00e3o; Registros de DNS Podemos buscar por hosts relacionados a um dom\u00ednio, que vai nos retornar informa\u00e7\u00f5es interessantes como: DNS Servers; MX Records; Host Records A; Alem disso temos a possibilidade(se a infraestrutura ter informa\u00e7\u00f5es disponiveis) ver um mapa com as informa\u00e7\u00f5es obtidas sobre o dom\u00ednio sobre uma infraestrutura podemos usar o DNSDumpster . Shodan \u00b6 Conhe\u00e7a o site oficial https://www.shodan.io/ Antes de come\u00e7ar \u00b6 Agora n\u00e3o \u00e9 s\u00f3 arquivos sens\u00edveis que est\u00e3o expostos na internet , nossos dispositivos conectados a internet tamb\u00e9m podem estar expostos e pessoas com m\u00e1 \u00edndole pode usar isso para o mal. Como usar o Shodan ? \u00b6 Vamos usar a vers\u00e3o web devido ao tempo que temos, mas futuramente vou disponibilizar como podemos usar o cliente via linha de comando. O shodan podemos adicionar um simples IP ou usar operadores, os que vamos usar s\u00e3o os operadores: IP; hostname; http.title. Realizando a busca \u00b6 Podemos buscar por um determinado IP da seguinte forma. ip:37.59.174.225 Podemos realizar outro exemplo usando o site da Globo.com hostname:globo.com Podemos buscar por informa\u00e7\u00f5es no titulo usando o operador http.title . http.title: \"Empresa\" Documenta\u00e7\u00e3o Oficial \u00b6 https://shodan.readthedocs.io/","title":"2.2 Buscando informa\u00e7\u00f5es sobre infraestruturas"},{"location":"LABS/monitorando-phishings/white/buscando-informacoes-sobre-infraestruturas/#buscando-informacoes-sobre-infraestruturas","text":"","title":"Buscando informa\u00e7\u00f5es sobre infraestruturas"},{"location":"LABS/monitorando-phishings/white/buscando-informacoes-sobre-infraestruturas/#validando-informacoes-sobre-um-dominio-suspeito","text":"","title":"Validando informa\u00e7\u00f5es sobre um dominio suspeito"},{"location":"LABS/monitorando-phishings/white/buscando-informacoes-sobre-infraestruturas/#whois","text":"","title":"Whois"},{"location":"LABS/monitorando-phishings/white/buscando-informacoes-sobre-infraestruturas/#whois-o-que-e","text":"O WHOIS \u00e9 um protocolo da TCP/IP espec\u00edfico para consultar informa\u00e7\u00f5es de contato e DNS sobre entidades na internet. Uma entidade na internet pode ser: Nome de dom\u00ednio; Um endere\u00e7o IP; Sistema aut\u00f4nomo(Autonomous system).","title":"Whois o que \u00e9 ?"},{"location":"LABS/monitorando-phishings/white/buscando-informacoes-sobre-infraestruturas/#como-usar","text":"","title":"Como usar ?"},{"location":"LABS/monitorando-phishings/white/buscando-informacoes-sobre-infraestruturas/#clientes-linux","text":"Em alguns sistemas Linux ele ja vem por padr\u00e3o e podemos realizar uma consulta da seguinte forma: whois badbank.com.br","title":"Clientes Linux"},{"location":"LABS/monitorando-phishings/white/buscando-informacoes-sobre-infraestruturas/#clientes-online","text":"Alem de usar um cliente instalado em nossa maquina, podemos usar um projeto na vers\u00e3o online e dessa forma n\u00e3o precisar instalar.","title":"Clientes Online"},{"location":"LABS/monitorando-phishings/white/buscando-informacoes-sobre-infraestruturas/#sharingmyip","text":"http://sharingmyip.com/","title":"SharingmyIP"},{"location":"LABS/monitorando-phishings/white/buscando-informacoes-sobre-infraestruturas/#o-que-e-o-sharingmyip","text":"O SharingMyIP \u00e9 um projeto online(que podemos automatizar tambem via linha de comando), que nos informa quais dominios usam o mesmo IP, mesmo dominio e at\u00e9 informa\u00e7\u00f5es de DNS. Vamos imaginar que precisamos obter o m\u00e1ximo de informa\u00e7\u00f5es sobre um dom\u00ednio/subdom\u00ednio, como podemos fazer isso sem interagir diretamente com o alvo e sem realizar um consulta ao DNS de nossa maquina? Podemos saber quais sites est\u00e3o compartilhando o mesmo IP usando o SharingMyIP. Alem disso atualmente muitas empresas usam hosts compartilhados, seja para economizar, simplicidade e tambem infraestruturas comprometidas.","title":"O que \u00e9 o SharingMyIP?"},{"location":"LABS/monitorando-phishings/white/buscando-informacoes-sobre-infraestruturas/#desenvolvendo-ferramenta-usando-python","text":"Podemos criar um script r\u00e1pido para nos ajudar nos testes , veja o exemplo: import requests from bs4 import BeautifulSoup url = \"https://globo.com\" ip = \"10.10.10.10\" rec_site = requests . get ( 'http://sharingmyip.com/?site=' + url ) #print(rec_site.text) soup = BeautifulSoup ( rec_site . text , 'html.parser' ) #print(\"Sites para o IP:\\n\"+soup.textarea.string) ''' for i in range(len(soup.textarea)): print(soup.textarea.string) ''' qt_textarea = len ( soup ( 'textarea' )) msg_list = [ 'Site (s) neste endere\u00e7o' , 'DNS para ' , 'Entradas de DNS relacionadas para' ] #for msg in range(msg_list): for i in range ( qt_textarea ): if ( i == 0 ): print ( msg_list [ 0 ] + \" \" + ip ) print ( soup ( 'textarea' )[ i ] . string ) elif i == 1 : print ( msg_list [ 1 ] + \" \" + url ) print ( soup ( 'textarea' )[ i ] . string ) elif i == 2 : print ( msg_list [ 2 ] + \" \" + url ) print ( soup ( 'textarea' )[ i ] . string ) else : print ( \"Aconteceu algo errado :D\" ) Temos agora o mesmo resultado que o site , a diferen\u00e7a que temos essa informa\u00e7\u00e3o com um script em python e que n\u00f3s desenvolvemos.","title":"Desenvolvendo ferramenta usando Python"},{"location":"LABS/monitorando-phishings/white/buscando-informacoes-sobre-infraestruturas/#dnsdumpster","text":"https://dnsdumpster.com/","title":"DNSdumpster"},{"location":"LABS/monitorando-phishings/white/buscando-informacoes-sobre-infraestruturas/#o-que-e-dnsdumpster","text":"DNSDumpster nos ajuda a buscar informa\u00e7\u00f5es com uso de OSINT, ele nos ajuda no: Reconhecimento; Pesquisa; Localiza\u00e7\u00e3o; Registros de DNS Podemos buscar por hosts relacionados a um dom\u00ednio, que vai nos retornar informa\u00e7\u00f5es interessantes como: DNS Servers; MX Records; Host Records A; Alem disso temos a possibilidade(se a infraestrutura ter informa\u00e7\u00f5es disponiveis) ver um mapa com as informa\u00e7\u00f5es obtidas sobre o dom\u00ednio sobre uma infraestrutura podemos usar o DNSDumpster .","title":"O que \u00e9 DNSDumpster?"},{"location":"LABS/monitorando-phishings/white/buscando-informacoes-sobre-infraestruturas/#shodan","text":"Conhe\u00e7a o site oficial https://www.shodan.io/","title":"Shodan"},{"location":"LABS/monitorando-phishings/white/buscando-informacoes-sobre-infraestruturas/#antes-de-comecar","text":"Agora n\u00e3o \u00e9 s\u00f3 arquivos sens\u00edveis que est\u00e3o expostos na internet , nossos dispositivos conectados a internet tamb\u00e9m podem estar expostos e pessoas com m\u00e1 \u00edndole pode usar isso para o mal.","title":"Antes de come\u00e7ar"},{"location":"LABS/monitorando-phishings/white/buscando-informacoes-sobre-infraestruturas/#como-usar-o-shodan","text":"Vamos usar a vers\u00e3o web devido ao tempo que temos, mas futuramente vou disponibilizar como podemos usar o cliente via linha de comando. O shodan podemos adicionar um simples IP ou usar operadores, os que vamos usar s\u00e3o os operadores: IP; hostname; http.title.","title":"Como usar o Shodan ?"},{"location":"LABS/monitorando-phishings/white/buscando-informacoes-sobre-infraestruturas/#realizando-a-busca","text":"Podemos buscar por um determinado IP da seguinte forma. ip:37.59.174.225 Podemos realizar outro exemplo usando o site da Globo.com hostname:globo.com Podemos buscar por informa\u00e7\u00f5es no titulo usando o operador http.title . http.title: \"Empresa\"","title":"Realizando a busca"},{"location":"LABS/monitorando-phishings/white/buscando-informacoes-sobre-infraestruturas/#documentacao-oficial","text":"https://shodan.readthedocs.io/","title":"Documenta\u00e7\u00e3o Oficial"},{"location":"LABS/monitorando-phishings/white/buscando-paginas-suspeitas/","text":"Buscando paginas suspeitas \u00b6 Diariamente usamos as redes sociais, muitos usuarios leigos acabam devido a facilidade buscando ajuda em paginas de redes sociais e isso pode ser um risco. Ainda mais quando paginas de SAC falsas tem um alcance grande e com diversos usuarios. Aqui eu vou ensinar como podemos buscar por paginas suspeitas usando solu\u00e7\u00f5es e consultas avan\u00e7adas. namechk \u00b6 O que \u00e9 o namechk ? \u00b6 O namechk \u00e9 uma solu\u00e7\u00e3o via web que nos auxilia na busca de dominios e o mais importante nomes de usuario . Dessa forma adicionando um determinado nome que queremos buscar, a solu\u00e7\u00e3o vai buscar por diversas redes sociais que usam o mesmo nome. https://namechk.com/ Como posso usar o namechk ? \u00b6 Vamos adicionar um determinado nome que queremos analisar. Podemos ver os resultados de dominios que ele retorna(ele s\u00f3 retorna 30 possiveis, diferente das nossas wordlists que buscam por centenas devido a nossa wordlist). Mais o nosso foco s\u00e3o as redes sociais. As que est\u00e3o em verde est\u00e3o disponiveis e as vermelhas j\u00e1 foram criadas. Redes sociais \u00b6 Depois de sites e endere\u00e7os suspeitos na internet, as redes sociais tambem \u00e9 um grande problema devido a facilidade para criar uma pagina. Facebook \u00b6 O Facebook ainda \u00e9 uma das maiores redes sociais do mundo, com ela temos diversas paginas e grupos. Vamos buscar por paginas indexadas na internet, vamos usar algumas dorks que nos auxilia. Google Dorks https://www.aware-online.com/osint-tools/facebook-search-tool/ Vamos precisar das seguintes informa\u00e7\u00f5es: url original; nome da marca; dominio facebook; site:facebook.com -inurl:url-oficial-marca \"nome-marca\" Instagram \u00b6 Assim como o facebook, o instagram tambem faz parte do grupo, possui inumeros usuarios, empresas e informacoes indexadas na internet. https://docs.visibrain.com/docs/instagram-filters-list https://www.aware-online.com/en/osint-tools/instagram-search-tool/ Temos diversas URLs que no momento n~ao vai nos ajuda tanto e s\u00e3o: -inurl:/tv -inurl:explore -inurl:/p Devido a isso vamos negar as urls usando -inurl . Vamos negar a url da pagina oficial e vamos informar o nome da marca via \"Nome da Marca\" . site:instagram.com -inurl:url-oficial-marca \"nome-marca\" -inurl:/tv -inurl:explore -inurl:/p Podemos melhorar essas buscas realizando a busca por titulos semelhantes. site:instagram.com intitle: \"Titulo pagina Oficial\" -inurl:url-oficial-marca \"nome-marca\" -inurl:/tv -inurl:explore -inurl:/p Twitter \u00b6 Muitas pessoas usam o twitter diariamente, existem muitas contas e os usuarios tem uma intera\u00e7\u00e3o muito grande. Alem de paginas que podem estar indexadas como vimos anteriormente, exitem tambem operadores avan\u00e7ados. Assim conseguimos realizar uma melhor busca no proprio twitter. https://developer.twitter.com/en/docs/twitter-api/v1/rules-and-filtering/search-operators Para realizar a busca de paginas indexadas podemos usar as seguintes informa\u00e7\u00f5es: site url do site oficial(vamos negar usando o operador -inurl) Nome marca usando o operador \"\" . site:twitter.com -inurl:url-oficial-marca \"nome-marca\" Projetos automatizados \u00b6 twitter (twitter-intelligence) \u00b6 https://github.com/batuhaniskr/twitter-intelligence twint \u00b6 O projeto twitter-intelligence nos ajuda no rastreamento e analise do twitter. https://github.com/twintproject/twint Youtube \u00b6 Diferente das redes sociais anteriores, o youtube \u00e9 uma rede social com foco em videos e algumas empresas possuem suas paginas oficiais. Existem operadores que podemos usar assim como o Google e o Twitter. https://seosly.com/youtube-search-operators/ Para realizar a analise de paginas indexadas na internet, vamos precisar das seguintes informa\u00e7\u00f5es: Nome da empresa; Palavras chaves; Canais oficiais; Dominio do youtube; \"empresa\" blackfriday site:youtube.com -inurl:channel/url-do-canal -inurl:/user/pagina-oficial/ -inurl:/watch -inurl:hashtag ```` ### LinkedIn J\u00e1 o LinkedIn \u00e9 uma rede social com foco em profissionais e empresas. Com ele \u00e9 muito facil encontrar pessoas de uma determinada empresa ou paginas de empresas. Assim como outras redes sociais, podemos usar operadores para nos auxiliar na busca de informa\u00e7\u00f5es. > http://booleanblackbelt.com/2009/01/linkedins-advanced-search-operators/ > https://www.linkedin.com/help/linkedin/answer/75814/using-boolean-search-on-linkedin?lang = en Para realizar a busca por paginas indexadas vamos precisar de: - site oficial ; - url oficial ; - palavras chaves ; - dominio do linkedin ``` sh blackfriday \"badbank.com.br\" site:linkedin.com -inurl:/company/badbank/ Outros projetos que podem nos auxiliar \u00b6 tweetdeck.twitter.com social-searcher.com https://www.social-searcher.com/google-social-search/ https://www.social-searcher.com/api-v2/ https://socialblade.com/","title":"2.4 Buscando paginas suspeitas"},{"location":"LABS/monitorando-phishings/white/buscando-paginas-suspeitas/#buscando-paginas-suspeitas","text":"Diariamente usamos as redes sociais, muitos usuarios leigos acabam devido a facilidade buscando ajuda em paginas de redes sociais e isso pode ser um risco. Ainda mais quando paginas de SAC falsas tem um alcance grande e com diversos usuarios. Aqui eu vou ensinar como podemos buscar por paginas suspeitas usando solu\u00e7\u00f5es e consultas avan\u00e7adas.","title":"Buscando paginas suspeitas"},{"location":"LABS/monitorando-phishings/white/buscando-paginas-suspeitas/#namechk","text":"","title":"namechk"},{"location":"LABS/monitorando-phishings/white/buscando-paginas-suspeitas/#o-que-e-o-namechk","text":"O namechk \u00e9 uma solu\u00e7\u00e3o via web que nos auxilia na busca de dominios e o mais importante nomes de usuario . Dessa forma adicionando um determinado nome que queremos buscar, a solu\u00e7\u00e3o vai buscar por diversas redes sociais que usam o mesmo nome. https://namechk.com/","title":"O que \u00e9 o namechk ?"},{"location":"LABS/monitorando-phishings/white/buscando-paginas-suspeitas/#como-posso-usar-o-namechk","text":"Vamos adicionar um determinado nome que queremos analisar. Podemos ver os resultados de dominios que ele retorna(ele s\u00f3 retorna 30 possiveis, diferente das nossas wordlists que buscam por centenas devido a nossa wordlist). Mais o nosso foco s\u00e3o as redes sociais. As que est\u00e3o em verde est\u00e3o disponiveis e as vermelhas j\u00e1 foram criadas.","title":"Como posso usar o namechk ?"},{"location":"LABS/monitorando-phishings/white/buscando-paginas-suspeitas/#redes-sociais","text":"Depois de sites e endere\u00e7os suspeitos na internet, as redes sociais tambem \u00e9 um grande problema devido a facilidade para criar uma pagina.","title":"Redes sociais"},{"location":"LABS/monitorando-phishings/white/buscando-paginas-suspeitas/#facebook","text":"O Facebook ainda \u00e9 uma das maiores redes sociais do mundo, com ela temos diversas paginas e grupos. Vamos buscar por paginas indexadas na internet, vamos usar algumas dorks que nos auxilia. Google Dorks https://www.aware-online.com/osint-tools/facebook-search-tool/ Vamos precisar das seguintes informa\u00e7\u00f5es: url original; nome da marca; dominio facebook; site:facebook.com -inurl:url-oficial-marca \"nome-marca\"","title":"Facebook"},{"location":"LABS/monitorando-phishings/white/buscando-paginas-suspeitas/#instagram","text":"Assim como o facebook, o instagram tambem faz parte do grupo, possui inumeros usuarios, empresas e informacoes indexadas na internet. https://docs.visibrain.com/docs/instagram-filters-list https://www.aware-online.com/en/osint-tools/instagram-search-tool/ Temos diversas URLs que no momento n~ao vai nos ajuda tanto e s\u00e3o: -inurl:/tv -inurl:explore -inurl:/p Devido a isso vamos negar as urls usando -inurl . Vamos negar a url da pagina oficial e vamos informar o nome da marca via \"Nome da Marca\" . site:instagram.com -inurl:url-oficial-marca \"nome-marca\" -inurl:/tv -inurl:explore -inurl:/p Podemos melhorar essas buscas realizando a busca por titulos semelhantes. site:instagram.com intitle: \"Titulo pagina Oficial\" -inurl:url-oficial-marca \"nome-marca\" -inurl:/tv -inurl:explore -inurl:/p","title":"Instagram"},{"location":"LABS/monitorando-phishings/white/buscando-paginas-suspeitas/#twitter","text":"Muitas pessoas usam o twitter diariamente, existem muitas contas e os usuarios tem uma intera\u00e7\u00e3o muito grande. Alem de paginas que podem estar indexadas como vimos anteriormente, exitem tambem operadores avan\u00e7ados. Assim conseguimos realizar uma melhor busca no proprio twitter. https://developer.twitter.com/en/docs/twitter-api/v1/rules-and-filtering/search-operators Para realizar a busca de paginas indexadas podemos usar as seguintes informa\u00e7\u00f5es: site url do site oficial(vamos negar usando o operador -inurl) Nome marca usando o operador \"\" . site:twitter.com -inurl:url-oficial-marca \"nome-marca\"","title":"Twitter"},{"location":"LABS/monitorando-phishings/white/buscando-paginas-suspeitas/#projetos-automatizados","text":"","title":"Projetos automatizados"},{"location":"LABS/monitorando-phishings/white/buscando-paginas-suspeitas/#twitter-twitter-intelligence","text":"https://github.com/batuhaniskr/twitter-intelligence","title":"twitter (twitter-intelligence)"},{"location":"LABS/monitorando-phishings/white/buscando-paginas-suspeitas/#twint","text":"O projeto twitter-intelligence nos ajuda no rastreamento e analise do twitter. https://github.com/twintproject/twint","title":"twint"},{"location":"LABS/monitorando-phishings/white/buscando-paginas-suspeitas/#youtube","text":"Diferente das redes sociais anteriores, o youtube \u00e9 uma rede social com foco em videos e algumas empresas possuem suas paginas oficiais. Existem operadores que podemos usar assim como o Google e o Twitter. https://seosly.com/youtube-search-operators/ Para realizar a analise de paginas indexadas na internet, vamos precisar das seguintes informa\u00e7\u00f5es: Nome da empresa; Palavras chaves; Canais oficiais; Dominio do youtube; \"empresa\" blackfriday site:youtube.com -inurl:channel/url-do-canal -inurl:/user/pagina-oficial/ -inurl:/watch -inurl:hashtag ```` ### LinkedIn J\u00e1 o LinkedIn \u00e9 uma rede social com foco em profissionais e empresas. Com ele \u00e9 muito facil encontrar pessoas de uma determinada empresa ou paginas de empresas. Assim como outras redes sociais, podemos usar operadores para nos auxiliar na busca de informa\u00e7\u00f5es. > http://booleanblackbelt.com/2009/01/linkedins-advanced-search-operators/ > https://www.linkedin.com/help/linkedin/answer/75814/using-boolean-search-on-linkedin?lang = en Para realizar a busca por paginas indexadas vamos precisar de: - site oficial ; - url oficial ; - palavras chaves ; - dominio do linkedin ``` sh blackfriday \"badbank.com.br\" site:linkedin.com -inurl:/company/badbank/","title":"Youtube"},{"location":"LABS/monitorando-phishings/white/buscando-paginas-suspeitas/#outros-projetos-que-podem-nos-auxiliar","text":"tweetdeck.twitter.com social-searcher.com https://www.social-searcher.com/google-social-search/ https://www.social-searcher.com/api-v2/ https://socialblade.com/","title":"Outros projetos que podem nos auxiliar"},{"location":"LABS/monitorando-phishings/white/comunidades/","text":"Comunidades \u00b6 Uma grande fatia das informa\u00e7\u00f5es encontradas vem gra\u00e7as as comunidades, muitas delas possuem solu\u00e7\u00f5es e parcerias que muitas vezes analisam 24/7 em busca de novas informa\u00e7\u00f5es. Vou comppartilhar algumas comunidades gratuitas e que podemos ter acesso de forma facil. MISP \u00b6 O que \u00e9 o MISP \u00b6 O MISP Threat Sharing \u00e9 uma plataforma de intelig\u00eancia de amea\u00e7as de c\u00f3digo aberto. O projeto desenvolve utilit\u00e1rios e documenta\u00e7\u00e3o para uma intelig\u00eancia de amea\u00e7as mais eficaz, compartilhando indicadores de comprometimento. Existem v\u00e1rias organiza\u00e7\u00f5es que executam inst\u00e2ncias MISP, listadas no site. Como ele pode nos ajudar ? \u00b6 Temos a possibilidade de criar nossa propria infraestrutura, devida a rica documenta\u00e7\u00e3o e por ser opensource conseguimos instalar em nosso servidor. https://github.com/MISP/MISP MISP comunidades \u00b6 O MISP possui diversas comunidades, algumas que apoiam diretamente o projeto e s\u00e3o: https://www.misp-project.org/communities/ CIRCL (Centro de Incidente Response de Bruxelas) https://www.circl.lu/services/misp-malware-information-sharing-platform/ CiviCERT (Computer Incident Response Center for Civil Society) https://civicert.org Entre outros MISP feeds \u00b6 Alem dos feeds defaults que vem por padr\u00e3o. https://www.misp-project.org/feeds/ Temos diversos - Phishing https://data.phishtank.com/data/online-valid.csv openphish https://openphish.com/feed.txt Phishingtank \u00b6 O Phishingtank \u00e9 uma comunidade incrivel onde podemos realizar a consulta ou adicionar paginas suspeitas. Como usar o Phishingtank ? \u00b6 Para um melhor uso \u00e9 necessario realiza\u00e7\u00e3o da cria\u00e7\u00e3o de conta e entrar no sistema. Podemos adicionar phishing indo at\u00e9 o Add a Phish . Podemos tambem pesquisar por paginas suspeitas indo at\u00e9 Phish Search . Alem disso \u00e9 possivel buscar por uma empresa especifica. E tambem filtrar por sites que foram validados como phishing. E se ainda est\u00e3o online. Tambem podemos realizar o download da lista de dominios validos que \u00e9 distribuidos no formato .csv . https://data.phishtank.com/data/online-valid.csv openphish \u00b6 OpenPhish \u00e9 uma plataforma independente totalmente automatizada para intelig\u00eancia de phishing. Ele identifica sites de phishing e realiza an\u00e1lises de intelig\u00eancia em tempo real, sem interven\u00e7\u00e3o humana e sem usar recursos externos, como listas negras. https://openphish.com/feed.txt OUTRAS \u00b6 https://github.com/mitchellkrogza/Phishing.Database/blob/master/phishing-links-ACTIVE-today.txt","title":"2.5 Comunidades"},{"location":"LABS/monitorando-phishings/white/comunidades/#comunidades","text":"Uma grande fatia das informa\u00e7\u00f5es encontradas vem gra\u00e7as as comunidades, muitas delas possuem solu\u00e7\u00f5es e parcerias que muitas vezes analisam 24/7 em busca de novas informa\u00e7\u00f5es. Vou comppartilhar algumas comunidades gratuitas e que podemos ter acesso de forma facil.","title":"Comunidades"},{"location":"LABS/monitorando-phishings/white/comunidades/#misp","text":"","title":"MISP"},{"location":"LABS/monitorando-phishings/white/comunidades/#o-que-e-o-misp","text":"O MISP Threat Sharing \u00e9 uma plataforma de intelig\u00eancia de amea\u00e7as de c\u00f3digo aberto. O projeto desenvolve utilit\u00e1rios e documenta\u00e7\u00e3o para uma intelig\u00eancia de amea\u00e7as mais eficaz, compartilhando indicadores de comprometimento. Existem v\u00e1rias organiza\u00e7\u00f5es que executam inst\u00e2ncias MISP, listadas no site.","title":"O que \u00e9 o MISP"},{"location":"LABS/monitorando-phishings/white/comunidades/#como-ele-pode-nos-ajudar","text":"Temos a possibilidade de criar nossa propria infraestrutura, devida a rica documenta\u00e7\u00e3o e por ser opensource conseguimos instalar em nosso servidor. https://github.com/MISP/MISP","title":"Como ele pode nos ajudar ?"},{"location":"LABS/monitorando-phishings/white/comunidades/#misp-comunidades","text":"O MISP possui diversas comunidades, algumas que apoiam diretamente o projeto e s\u00e3o: https://www.misp-project.org/communities/ CIRCL (Centro de Incidente Response de Bruxelas) https://www.circl.lu/services/misp-malware-information-sharing-platform/ CiviCERT (Computer Incident Response Center for Civil Society) https://civicert.org Entre outros","title":"MISP comunidades"},{"location":"LABS/monitorando-phishings/white/comunidades/#misp-feeds","text":"Alem dos feeds defaults que vem por padr\u00e3o. https://www.misp-project.org/feeds/ Temos diversos - Phishing https://data.phishtank.com/data/online-valid.csv openphish https://openphish.com/feed.txt","title":"MISP feeds"},{"location":"LABS/monitorando-phishings/white/comunidades/#phishingtank","text":"O Phishingtank \u00e9 uma comunidade incrivel onde podemos realizar a consulta ou adicionar paginas suspeitas.","title":"Phishingtank"},{"location":"LABS/monitorando-phishings/white/comunidades/#como-usar-o-phishingtank","text":"Para um melhor uso \u00e9 necessario realiza\u00e7\u00e3o da cria\u00e7\u00e3o de conta e entrar no sistema. Podemos adicionar phishing indo at\u00e9 o Add a Phish . Podemos tambem pesquisar por paginas suspeitas indo at\u00e9 Phish Search . Alem disso \u00e9 possivel buscar por uma empresa especifica. E tambem filtrar por sites que foram validados como phishing. E se ainda est\u00e3o online. Tambem podemos realizar o download da lista de dominios validos que \u00e9 distribuidos no formato .csv . https://data.phishtank.com/data/online-valid.csv","title":"Como usar o Phishingtank ?"},{"location":"LABS/monitorando-phishings/white/comunidades/#openphish","text":"OpenPhish \u00e9 uma plataforma independente totalmente automatizada para intelig\u00eancia de phishing. Ele identifica sites de phishing e realiza an\u00e1lises de intelig\u00eancia em tempo real, sem interven\u00e7\u00e3o humana e sem usar recursos externos, como listas negras. https://openphish.com/feed.txt","title":"openphish"},{"location":"LABS/monitorando-phishings/white/comunidades/#outras","text":"https://github.com/mitchellkrogza/Phishing.Database/blob/master/phishing-links-ACTIVE-today.txt","title":"OUTRAS"},{"location":"LABS/monitorando-phishings/white/materiais-indexados-na-internet/","text":"Materiais indexados na internet \u00b6 Atualmente gra\u00e7as ao motores de busca conseguimos encontrar diversos sites na internet com muita facilidade, \u00e9 possivel encontrar blogs que nos ajuda com noticias, sites de institui\u00e7\u00f5es, foruns para busca por informa\u00e7\u00f5es e lojas virtuais. Motores de busca \u00b6 Temos atualmente diversos sites que nos auxilia nessa busca, entre os principais est\u00e3o: Google; Bing; yandex; Duck Duck Go; Entre outros. Nessa oficina vou focar apenas no Google, mas em breve vou disponibilizar um material completo com diversos motores e busca. Google Dorks \u00b6 Para um melhor exito em nossas buscas podemos usar palavras especificas e operadores que nos auxilia. Podemos ver mais sobre Google Hacking Palavras chaves e Dorks \u00b6 Eu recomendo sempre ser o maximo acertivo nas palavras usadas, vamos focar no nome da marca e o titulo da pagina oficial. Quando encontramos uma pagina na internet um dos pontos que a grande maioria de paginas possui, s\u00e3o os titulos. Tambem conhecidos no HTML como Titulo da pagina . Para realizar a busca por titulos podemos usar o operador: intitle intitle: \"Nome do titulo\" Para buscar por algo especifico podemos usar o operador \"nome\" , dessa forma \u00e9 possivel buscar por uma frase especifica. \"palavras chaves\" O operador site vai nos retornar resultados de um site especifico, por exemplo: site:badbank.com.br J\u00e1 o operador - \u00e9 nega\u00e7\u00e3o, ele vai recursar qualquer resultado que esteja no -site . Operador -site Agora podemos somar informa\u00e7\u00f5es do tituto de uma pagina oficial, negando o site verdadeira e assim analisando os resultados em busca de paginas suspeitas. intitle: \"Nome do titulo\" \"badbank\" -site:badbank.com.br Para finalizar podemos usar informa\u00e7\u00f5es de uma url especifica, por exemplo: - badbank.com.br/novos-clientes-badbank inurl:novos-clientes-badbank","title":"2.3 Materiais indexados na internet"},{"location":"LABS/monitorando-phishings/white/materiais-indexados-na-internet/#materiais-indexados-na-internet","text":"Atualmente gra\u00e7as ao motores de busca conseguimos encontrar diversos sites na internet com muita facilidade, \u00e9 possivel encontrar blogs que nos ajuda com noticias, sites de institui\u00e7\u00f5es, foruns para busca por informa\u00e7\u00f5es e lojas virtuais.","title":"Materiais indexados na internet"},{"location":"LABS/monitorando-phishings/white/materiais-indexados-na-internet/#motores-de-busca","text":"Temos atualmente diversos sites que nos auxilia nessa busca, entre os principais est\u00e3o: Google; Bing; yandex; Duck Duck Go; Entre outros. Nessa oficina vou focar apenas no Google, mas em breve vou disponibilizar um material completo com diversos motores e busca.","title":"Motores de busca"},{"location":"LABS/monitorando-phishings/white/materiais-indexados-na-internet/#google-dorks","text":"Para um melhor exito em nossas buscas podemos usar palavras especificas e operadores que nos auxilia. Podemos ver mais sobre Google Hacking","title":"Google Dorks"},{"location":"LABS/monitorando-phishings/white/materiais-indexados-na-internet/#palavras-chaves-e-dorks","text":"Eu recomendo sempre ser o maximo acertivo nas palavras usadas, vamos focar no nome da marca e o titulo da pagina oficial. Quando encontramos uma pagina na internet um dos pontos que a grande maioria de paginas possui, s\u00e3o os titulos. Tambem conhecidos no HTML como Titulo da pagina . Para realizar a busca por titulos podemos usar o operador: intitle intitle: \"Nome do titulo\" Para buscar por algo especifico podemos usar o operador \"nome\" , dessa forma \u00e9 possivel buscar por uma frase especifica. \"palavras chaves\" O operador site vai nos retornar resultados de um site especifico, por exemplo: site:badbank.com.br J\u00e1 o operador - \u00e9 nega\u00e7\u00e3o, ele vai recursar qualquer resultado que esteja no -site . Operador -site Agora podemos somar informa\u00e7\u00f5es do tituto de uma pagina oficial, negando o site verdadeira e assim analisando os resultados em busca de paginas suspeitas. intitle: \"Nome do titulo\" \"badbank\" -site:badbank.com.br Para finalizar podemos usar informa\u00e7\u00f5es de uma url especifica, por exemplo: - badbank.com.br/novos-clientes-badbank inurl:novos-clientes-badbank","title":"Palavras chaves e Dorks"},{"location":"LABS/monitorando-phishings/white/monitorando-dominios/","text":"Monitorando dom\u00ednios \u00b6 TLD \u00b6 O que \u00e9 TLD ? \u00b6 TLD, ou Top Level Domain, \u00e9 a parte final de um endere\u00e7o de um site que vem logo ap\u00f3s o nome. Por exemplo: badbank(nome do site) .com.br(TLD) Para melhor entendimento, o TLD seria a exata localiza\u00e7\u00e3o de uma empresa, seu endere\u00e7o completo. Por exemplo: badbank.com.br Alguns exemplos de TLD s\u00e3o: .com .com.br .fun .info .com .us .co entre outros Obviamente, ele n\u00e3o est\u00e1 em um dom\u00ednio ao acaso, seu objetivo \u00e9 realizar uma esp\u00e9cie de classifica\u00e7\u00e3o do site. Ou seja, um site comercial cujo top-level domain \u00e9 .com est\u00e1 informando que se trata de um site comercial. Outro exemplo que temos \u00e9 o WordPress.com, que \u00e9 um site comercial, enquanto o WordPress.org se trata de uma vers\u00e3o sem fins lucrativos do grupo. Referencia: https://br.godaddy.com/blog/tld-o-que-e-quais-existem-e-como-escolher-o-ideal/ [O que \u00e9 TLD]( https://pt.wikipedia.org/wiki/Dom%C3%ADnio_de_topo Podemos ver algumas lista de TLDs no site oficial da IANA Lista de TLDs da IANA Ou uma lista completa disponiveis e as novidades que ser\u00e3o lan\u00e7adas em TLDs. TLDs de A a Z Criando uma lista de TLDs \u00b6 Anteriormente vimos diversos sites que nos auxilia na listagem de possiveis TLDs, agora vamos usar o tlds-from-a-z por ser o mais completo. Vamos criar um arquivo .txt com os dominios e com o passar do tempo adicionando novos que forem encontrados durante o nosso trabalho ou at\u00e9 alguma atualiza\u00e7\u00e3o com TLDs novos. Agora vamos alterar nossa lista e adicionar dominios que n\u00e3o est\u00e3o na lista com foco no brasil, por exemplo .gov.br , podemos ver que n\u00e3o aparece esse dominio e seria interessante adicionar. Dominios .gov acabam n\u00e3o aparecendo e \u00e9 interessante adicionar. Por exemplo: sp.gov.br mg.gov.br pb.gov.br es.gov.br pa.gov.br rj.gov.br ba.gov.br ap.gov.br se.gov.br ce.gov.br go.gov.br df.gov.br rr.gov.br sc.gov.br Todas essas informa\u00e7\u00f5es podem ser interessantes em algum momento da pesquisa, vai que um dominio governamental est\u00e1 sendo usado como phishing n\u00e9 ?! Solu\u00e7\u00f5es opensource \u00b6 Temos solu\u00e7\u00f5es pagas que fazem esses servi\u00e7os, mas o objetivo dessa oficina \u00e9 usar apenas solu\u00e7\u00f5es opensource e que podemos analisar codigo fonte e at\u00e9 enviar melhorias. DNSTwist \u00b6 O DNSTwist nos auxilia e reconhecimento de problema que os usu\u00e1rios podem ter ao tentar digitar seu nome de dom\u00ednio. Conseguimos analisar diversas tecnicas que os advers\u00e1rios possam usar para atacar voc\u00ea. Algumas das tecnicas usadas s\u00e3o: Pode detectar erros de digita\u00e7\u00e3o; Ataques de phishing; Fraude; Falsifica\u00e7\u00e3o de identidade de marca. Com o dnstwist podemos encontrar fonte adicionais de intelig\u00eancia sobre amea\u00e7as direcionadas a dominios especificos e gra\u00e7as a ela muitos dominios suspeitos s\u00e3o encontrados. Site oficial - dnstwist Instalando - DNSTwist \u00b6 Podemos instalar o dnstwist de 3 formas, s\u00e3o elas: Via PIP; Via GIT; Via Docker. Via PIP \u00b6 Podemos realizar a instala\u00e7\u00e3o com o PIP da seguinte forma: sudo pip install dnstwist Lembrando que precisa ter instalado o pip. Via GIT \u00b6 Caso queira ter a ultima vers\u00e3o do projeto podemos optar por usar a vers\u00e3o via GIT. $ git clone https://github.com/elceef/dnstwist.git $ cd dnstwist $ pip install . Via Docker \u00b6 O Docker temos duas formas de realizar a instala\u00e7\u00e3o, s\u00e3o elas: A primeira \u00e9 usar a imagem oficial do dnstwist que est\u00e1 disponivel no Docker Hub, $ docker run elceef/dnstwist A segunda \u00e9 criar uma imagem propria com o codigo que temos no github. $ git clone https://github.com/elceef/dnstwist.git $ cd dnstwist $ docker build -t \"greenmind/dnstwist:1\" . Vers\u00f5es online - DNSTwist \u00b6 Alem de instalar o dnstwist, tambem podemos realizar o uso via web. Projeto online oficinal do dnstwist Com ele podemos realizar a consultas de dominio da mesma forma que fizemos via linha de comando, a diferen\u00e7a \u00e9 que usamos a vers\u00e3o web. URLCrazy \u00b6 O que \u00e9 o URLCrazy? \u00b6 O URLCrazy \u00e9 uma solu\u00e7\u00e3o opensource com foco em OSINT para gerar e testar erros de digita\u00e7\u00e3o ou varia\u00e7\u00f5es de dom\u00ednio para detectar ou executar erros de digita\u00e7\u00e3o, sequestro de URL, phishing e espionagem corporativa. https://github.com/urbanadventurer/urlcrazy Conseguimos detectar invasores que lucram com erros de digita\u00e7\u00e3o em nomes de dom\u00ednio, \u00e9 possivel proteger uma marca registrando erros de digita\u00e7\u00e3o populares, alem de identificar dom\u00ednio que receber\u00e3o tr\u00e1fego destinado a outro dom\u00ednio e conduzir ataques de phishing durante um pentest. Instalando o URLCrazy \u00b6 Caso esteja usando o Kali Linux \u00e9 possivel instalar usando apt. $ sudo apt update $ sudo apt install urlcrazy Como podemos usar o URLCrazy \u00b6 urlcrazy -p badbank.com.br Dessa forma ele vai nos retornar diversos dom\u00ednios, seja registrados ou n\u00e3o. phishing_catcher \u00b6 https://github.com/x0rz/phishing_catcher O que \u00e9 o phishing_catcher ? \u00b6 Com o phishing_catcher phishing \u00e9 possivel detectar poss\u00edveis dom\u00ednios de phishing quase em tempo real, isso \u00e9 possivel devido ao projeto procurar por cria\u00e7\u00e3o de certificados TLS suspeitas relatadas ao Certificate Transparency Log (CTL) por meio da API CertStream . Instalando o phishing_catcher \u00b6 Podemos instalar o phishing_catcher usando o codigo fonte dele que est\u00e1 disponivel no link a seguir: $ git clone https://github.com/x0rz/phishing_catcher $ cd phishing_catcher $ sudo pip3 install -r requirements.txt Como usar o phishing_catcher? \u00b6 Podemos usar o phishing_catcher de forma simples, s\u00f3 chamar o arquivo com o python3. $ python3 catch_phishing.py Buscando dominios indexados na internet \u00b6 Vamos buscar por dominios que possam estar indexados na internet nos motores de busca, vou focar apenas no Google nessa oficina. Precisar de 2 informa\u00e7\u00f5es para uma melhor busca, s\u00e3o as: Dominio original; Titulo da pagina; Realizando dorks para busca \u00b6 Imaginando que o nosso site que estamos analisando seja o site da oakley que possui o dominio oakley.com e tem o titulo Loja oficial Oakley\u00ae: \u00d3culos de sol, \u00d3culos de Prote\u00e7\u00e3o e Vestu\u00e1rio - Brazil . -site:oakley.com intitle: \"Loja oficial Oakley\u00ae: \u00d3culos de sol, \u00d3culos de Prote\u00e7\u00e3o e Vestu\u00e1rio - Brazil\" Buscando infraestruturas indexados na internet \u00b6 Lembrando que isso \u00e9 apenas um introdu\u00e7\u00e3o e vamos ver mais no capitulo de buscando informa\u00e7\u00f5es sobre infraestruturas . Assim como sites est\u00e3o indexados na internet, informa\u00e7\u00f5es de infraestruturas tambem est\u00e3o e podem nos auxilixar na busca de sites maliciosos. Vamos usar o Shodan, ele \u00e9 uma solu\u00e7\u00e3o incrivel que nos auxilia na busca de informa\u00e7\u00f5es de infraestruturas. https://www.shodan.io/ \u00c9 importante apenas uma informa\u00e7\u00e3o, seja nome da empresa ou titulo que \u00e9 o mais recomendado. Para realizar a busca, vamos usar o operador http.title . http.title: \"Oakley\"","title":"2.1 Monitoramento de dominios"},{"location":"LABS/monitorando-phishings/white/monitorando-dominios/#monitorando-dominios","text":"","title":"Monitorando dom\u00ednios"},{"location":"LABS/monitorando-phishings/white/monitorando-dominios/#tld","text":"","title":"TLD"},{"location":"LABS/monitorando-phishings/white/monitorando-dominios/#o-que-e-tld","text":"TLD, ou Top Level Domain, \u00e9 a parte final de um endere\u00e7o de um site que vem logo ap\u00f3s o nome. Por exemplo: badbank(nome do site) .com.br(TLD) Para melhor entendimento, o TLD seria a exata localiza\u00e7\u00e3o de uma empresa, seu endere\u00e7o completo. Por exemplo: badbank.com.br Alguns exemplos de TLD s\u00e3o: .com .com.br .fun .info .com .us .co entre outros Obviamente, ele n\u00e3o est\u00e1 em um dom\u00ednio ao acaso, seu objetivo \u00e9 realizar uma esp\u00e9cie de classifica\u00e7\u00e3o do site. Ou seja, um site comercial cujo top-level domain \u00e9 .com est\u00e1 informando que se trata de um site comercial. Outro exemplo que temos \u00e9 o WordPress.com, que \u00e9 um site comercial, enquanto o WordPress.org se trata de uma vers\u00e3o sem fins lucrativos do grupo. Referencia: https://br.godaddy.com/blog/tld-o-que-e-quais-existem-e-como-escolher-o-ideal/ [O que \u00e9 TLD]( https://pt.wikipedia.org/wiki/Dom%C3%ADnio_de_topo Podemos ver algumas lista de TLDs no site oficial da IANA Lista de TLDs da IANA Ou uma lista completa disponiveis e as novidades que ser\u00e3o lan\u00e7adas em TLDs. TLDs de A a Z","title":"O que \u00e9 TLD ?"},{"location":"LABS/monitorando-phishings/white/monitorando-dominios/#criando-uma-lista-de-tlds","text":"Anteriormente vimos diversos sites que nos auxilia na listagem de possiveis TLDs, agora vamos usar o tlds-from-a-z por ser o mais completo. Vamos criar um arquivo .txt com os dominios e com o passar do tempo adicionando novos que forem encontrados durante o nosso trabalho ou at\u00e9 alguma atualiza\u00e7\u00e3o com TLDs novos. Agora vamos alterar nossa lista e adicionar dominios que n\u00e3o est\u00e3o na lista com foco no brasil, por exemplo .gov.br , podemos ver que n\u00e3o aparece esse dominio e seria interessante adicionar. Dominios .gov acabam n\u00e3o aparecendo e \u00e9 interessante adicionar. Por exemplo: sp.gov.br mg.gov.br pb.gov.br es.gov.br pa.gov.br rj.gov.br ba.gov.br ap.gov.br se.gov.br ce.gov.br go.gov.br df.gov.br rr.gov.br sc.gov.br Todas essas informa\u00e7\u00f5es podem ser interessantes em algum momento da pesquisa, vai que um dominio governamental est\u00e1 sendo usado como phishing n\u00e9 ?!","title":"Criando uma lista de TLDs"},{"location":"LABS/monitorando-phishings/white/monitorando-dominios/#solucoes-opensource","text":"Temos solu\u00e7\u00f5es pagas que fazem esses servi\u00e7os, mas o objetivo dessa oficina \u00e9 usar apenas solu\u00e7\u00f5es opensource e que podemos analisar codigo fonte e at\u00e9 enviar melhorias.","title":"Solu\u00e7\u00f5es opensource"},{"location":"LABS/monitorando-phishings/white/monitorando-dominios/#dnstwist","text":"O DNSTwist nos auxilia e reconhecimento de problema que os usu\u00e1rios podem ter ao tentar digitar seu nome de dom\u00ednio. Conseguimos analisar diversas tecnicas que os advers\u00e1rios possam usar para atacar voc\u00ea. Algumas das tecnicas usadas s\u00e3o: Pode detectar erros de digita\u00e7\u00e3o; Ataques de phishing; Fraude; Falsifica\u00e7\u00e3o de identidade de marca. Com o dnstwist podemos encontrar fonte adicionais de intelig\u00eancia sobre amea\u00e7as direcionadas a dominios especificos e gra\u00e7as a ela muitos dominios suspeitos s\u00e3o encontrados. Site oficial - dnstwist","title":"DNSTwist"},{"location":"LABS/monitorando-phishings/white/monitorando-dominios/#instalando-dnstwist","text":"Podemos instalar o dnstwist de 3 formas, s\u00e3o elas: Via PIP; Via GIT; Via Docker.","title":"Instalando - DNSTwist"},{"location":"LABS/monitorando-phishings/white/monitorando-dominios/#via-pip","text":"Podemos realizar a instala\u00e7\u00e3o com o PIP da seguinte forma: sudo pip install dnstwist Lembrando que precisa ter instalado o pip.","title":"Via PIP"},{"location":"LABS/monitorando-phishings/white/monitorando-dominios/#via-git","text":"Caso queira ter a ultima vers\u00e3o do projeto podemos optar por usar a vers\u00e3o via GIT. $ git clone https://github.com/elceef/dnstwist.git $ cd dnstwist $ pip install .","title":"Via GIT"},{"location":"LABS/monitorando-phishings/white/monitorando-dominios/#via-docker","text":"O Docker temos duas formas de realizar a instala\u00e7\u00e3o, s\u00e3o elas: A primeira \u00e9 usar a imagem oficial do dnstwist que est\u00e1 disponivel no Docker Hub, $ docker run elceef/dnstwist A segunda \u00e9 criar uma imagem propria com o codigo que temos no github. $ git clone https://github.com/elceef/dnstwist.git $ cd dnstwist $ docker build -t \"greenmind/dnstwist:1\" .","title":"Via Docker"},{"location":"LABS/monitorando-phishings/white/monitorando-dominios/#versoes-online-dnstwist","text":"Alem de instalar o dnstwist, tambem podemos realizar o uso via web. Projeto online oficinal do dnstwist Com ele podemos realizar a consultas de dominio da mesma forma que fizemos via linha de comando, a diferen\u00e7a \u00e9 que usamos a vers\u00e3o web.","title":"Vers\u00f5es online - DNSTwist"},{"location":"LABS/monitorando-phishings/white/monitorando-dominios/#urlcrazy","text":"","title":"URLCrazy"},{"location":"LABS/monitorando-phishings/white/monitorando-dominios/#o-que-e-o-urlcrazy","text":"O URLCrazy \u00e9 uma solu\u00e7\u00e3o opensource com foco em OSINT para gerar e testar erros de digita\u00e7\u00e3o ou varia\u00e7\u00f5es de dom\u00ednio para detectar ou executar erros de digita\u00e7\u00e3o, sequestro de URL, phishing e espionagem corporativa. https://github.com/urbanadventurer/urlcrazy Conseguimos detectar invasores que lucram com erros de digita\u00e7\u00e3o em nomes de dom\u00ednio, \u00e9 possivel proteger uma marca registrando erros de digita\u00e7\u00e3o populares, alem de identificar dom\u00ednio que receber\u00e3o tr\u00e1fego destinado a outro dom\u00ednio e conduzir ataques de phishing durante um pentest.","title":"O que \u00e9 o URLCrazy?"},{"location":"LABS/monitorando-phishings/white/monitorando-dominios/#instalando-o-urlcrazy","text":"Caso esteja usando o Kali Linux \u00e9 possivel instalar usando apt. $ sudo apt update $ sudo apt install urlcrazy","title":"Instalando o URLCrazy"},{"location":"LABS/monitorando-phishings/white/monitorando-dominios/#como-podemos-usar-o-urlcrazy","text":"urlcrazy -p badbank.com.br Dessa forma ele vai nos retornar diversos dom\u00ednios, seja registrados ou n\u00e3o.","title":"Como podemos usar o URLCrazy"},{"location":"LABS/monitorando-phishings/white/monitorando-dominios/#phishing_catcher","text":"https://github.com/x0rz/phishing_catcher","title":"phishing_catcher"},{"location":"LABS/monitorando-phishings/white/monitorando-dominios/#o-que-e-o-phishing_catcher","text":"Com o phishing_catcher phishing \u00e9 possivel detectar poss\u00edveis dom\u00ednios de phishing quase em tempo real, isso \u00e9 possivel devido ao projeto procurar por cria\u00e7\u00e3o de certificados TLS suspeitas relatadas ao Certificate Transparency Log (CTL) por meio da API CertStream .","title":"O que \u00e9 o phishing_catcher ?"},{"location":"LABS/monitorando-phishings/white/monitorando-dominios/#instalando-o-phishing_catcher","text":"Podemos instalar o phishing_catcher usando o codigo fonte dele que est\u00e1 disponivel no link a seguir: $ git clone https://github.com/x0rz/phishing_catcher $ cd phishing_catcher $ sudo pip3 install -r requirements.txt","title":"Instalando o phishing_catcher"},{"location":"LABS/monitorando-phishings/white/monitorando-dominios/#como-usar-o-phishing_catcher","text":"Podemos usar o phishing_catcher de forma simples, s\u00f3 chamar o arquivo com o python3. $ python3 catch_phishing.py","title":"Como usar o phishing_catcher?"},{"location":"LABS/monitorando-phishings/white/monitorando-dominios/#buscando-dominios-indexados-na-internet","text":"Vamos buscar por dominios que possam estar indexados na internet nos motores de busca, vou focar apenas no Google nessa oficina. Precisar de 2 informa\u00e7\u00f5es para uma melhor busca, s\u00e3o as: Dominio original; Titulo da pagina;","title":"Buscando dominios indexados na internet"},{"location":"LABS/monitorando-phishings/white/monitorando-dominios/#realizando-dorks-para-busca","text":"Imaginando que o nosso site que estamos analisando seja o site da oakley que possui o dominio oakley.com e tem o titulo Loja oficial Oakley\u00ae: \u00d3culos de sol, \u00d3culos de Prote\u00e7\u00e3o e Vestu\u00e1rio - Brazil . -site:oakley.com intitle: \"Loja oficial Oakley\u00ae: \u00d3culos de sol, \u00d3culos de Prote\u00e7\u00e3o e Vestu\u00e1rio - Brazil\"","title":"Realizando dorks para busca"},{"location":"LABS/monitorando-phishings/white/monitorando-dominios/#buscando-infraestruturas-indexados-na-internet","text":"Lembrando que isso \u00e9 apenas um introdu\u00e7\u00e3o e vamos ver mais no capitulo de buscando informa\u00e7\u00f5es sobre infraestruturas . Assim como sites est\u00e3o indexados na internet, informa\u00e7\u00f5es de infraestruturas tambem est\u00e3o e podem nos auxilixar na busca de sites maliciosos. Vamos usar o Shodan, ele \u00e9 uma solu\u00e7\u00e3o incrivel que nos auxilia na busca de informa\u00e7\u00f5es de infraestruturas. https://www.shodan.io/ \u00c9 importante apenas uma informa\u00e7\u00e3o, seja nome da empresa ou titulo que \u00e9 o mais recomendado. Para realizar a busca, vamos usar o operador http.title . http.title: \"Oakley\"","title":"Buscando infraestruturas indexados na internet"}]}